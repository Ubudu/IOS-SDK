(function(){if(!!jQuery.browser){return}var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}jQuery.browser=browser})();window.matchMedia=window.matchMedia||function(doc,undefined){var docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);var mqRun=function(mq){div.innerHTML='&shy;<style media="'+mq+'"> #mq-test-1 { width: 42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:mq}},getEmValue=function(){var ret,body=docElem.body,fakeUsed=false;div.style.cssText="position:absolute;font-size:1em;width:1em";if(!body){body=fakeUsed=doc.createElement("body");body.style.background="none"}body.appendChild(div);docElem.insertBefore(body,docElem.firstChild);if(fakeUsed){docElem.removeChild(body)}else{body.removeChild(div)}ret=eminpx=parseFloat(div.offsetWidth);return ret},eminpx,mqSupport=mqRun("(min-width: 0px)").matches;return function(mq){if(mqSupport){return mqRun(mq)}else{var min=mq.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),max=mq.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),minnull=min===null,maxnull=max===null,currWidth=doc.body.offsetWidth,em="em";if(!!min){min=parseFloat(min)*(min.indexOf(em)>-1?eminpx||getEmValue():1)}if(!!max){max=parseFloat(max)*(max.indexOf(em)>-1?eminpx||getEmValue():1)}bool=(!minnull||!maxnull)&&(minnull||currWidth>=min)&&(maxnull||currWidth<=max);return{matches:bool,media:mq}}}}(document);(function($,exports){"use strict";$.fn.djax=function(selector,exceptions){if(!history.pushState){return $(this)}var self=this,blockSelector=selector,excludes=exceptions&&exceptions.length?exceptions:[],djaxing=false;window.history.replaceState({url:window.location.href,title:$("title").text()},$("title").text(),window.location.href);self.clearDjaxing=function(){self.djaxing=false};self.attachClick=function(element,event){var link=$(element),exception=false;$.each(excludes,function(index,exclusion){if(link.attr("href").indexOf(exclusion)!==-1){exception=true}if(window.location.href.indexOf(exclusion)!==-1){exception=true}});if(exception||link.hasClass("no-djax")){return $(element)}event.preventDefault();if(self.djaxing){setTimeout(self.clearDjaxing,1e3);return $(element)}$(window).trigger("djaxClick",element);self.reqUrl=link.attr("href");self.triggered=false;self.navigate(link.attr("href"),true)};self.navigate=function(url,add){var blocks=$(blockSelector);self.djaxing=true;$.get(url,function(response){if(url!==self.reqUrl){self.navigate(self.reqUrl,false);return true}var result=$('"'+response+'"'),newBlocks=$(result).find(blockSelector);if(add){window.history.pushState({url:url,title:$(result).filter("title").text()},$(result).filter("title").text(),url)}$("title").text($(result).filter("title").text());blocks.each(function(){var id="#"+$(this).attr("id"),newBlock=newBlocks.filter(id),block=$(this);if(newBlock.length){if(block.html()!==newBlock.html()){block.replaceWith(newBlock)}}else{block.remove()}});$.each(newBlocks,function(){var newBlock=$(this),id="#"+$(this).attr("id"),$previousSibling;if(!$(id).length){$previousSibling=$(result).find(id).prev();if($previousSibling.length){newBlock.insertAfter("#"+$previousSibling.attr("id"))}else{newBlock.prependTo("#"+newBlock.parent().attr("id"))}}});$("a").filter(function(){return this.hostname===location.hostname&&!$(this).hasClass("no-djax")}).addClass("dJAX_internal").on("click",function(event){return self.attachClick(this,event)});if(!self.triggered){$(window).trigger("djaxLoad",[{url:url,title:$(result).filter("title").text(),response:response}]);self.triggered=true;self.djaxing=false}})};$(this).find("a").filter(function(){return this.hostname===location.hostname}).addClass("dJAX_internal").on("click",function(event){return self.attachClick(this,event)});$(window).bind("popstate",function(event){self.triggered=false;if(event.originalEvent.state){self.reqUrl=event.originalEvent.state.url;self.navigate(event.originalEvent.state.url,false)}})}})(jQuery,window);LazyLoad=function(doc){var env,head,pending={},pollCount=0,queue={css:[],js:[]},styleSheets=doc.styleSheets;function createNode(name,attrs){var node=doc.createElement(name),attr;for(attr in attrs){if(attrs.hasOwnProperty(attr)){node.setAttribute(attr,attrs[attr])}}return node}function finish(type){var p=pending[type],callback,urls;if(p){callback=p.callback;urls=p.urls;urls.shift();pollCount=0;if(!urls.length){callback&&callback.call(p.context,p.obj);pending[type]=null;queue[type].length&&load(type)}}}function getEnv(){var ua=navigator.userAgent;env={async:doc.createElement("script").async===true};(env.webkit=/AppleWebKit\//.test(ua))||(env.ie=/MSIE/.test(ua))||(env.opera=/Opera/.test(ua))||(env.gecko=/Gecko\//.test(ua))||(env.unknown=true)}function load(type,urls,callback,obj,context){var _finish=function(){finish(type)},isCSS=type==="css",nodes=[],i,len,node,p,pendingUrls,url;env||getEnv();if(urls){urls=typeof urls==="string"?[urls]:urls.concat();if(isCSS||env.async||env.gecko||env.opera){queue[type].push({urls:urls,callback:callback,obj:obj,context:context})}else{for(i=0,len=urls.length;i<len;++i){queue[type].push({urls:[urls[i]],callback:i===len-1?callback:null,obj:obj,context:context})}}}if(pending[type]||!(p=pending[type]=queue[type].shift())){return}head||(head=doc.head||doc.getElementsByTagName("head")[0]);pendingUrls=p.urls;for(i=0,len=pendingUrls.length;i<len;++i){url=pendingUrls[i];if(isCSS){node=env.gecko?createNode("style"):createNode("link",{href:url,rel:"stylesheet"})}else{node=createNode("script",{src:url});node.async=false}node.className="lazyload";node.setAttribute("charset","utf-8");if(env.ie&&!isCSS){node.onreadystatechange=function(){if(/loaded|complete/.test(node.readyState)){node.onreadystatechange=null;_finish()}}}else if(isCSS&&(env.gecko||env.webkit)){if(env.webkit){p.urls[i]=node.href;pollWebKit()}else{node.innerHTML='@import "'+url+'";';pollGecko(node)}}else{node.onload=node.onerror=_finish}nodes.push(node)}for(i=0,len=nodes.length;i<len;++i){head.appendChild(nodes[i])}}function pollGecko(node){var hasRules;try{hasRules=!!node.sheet.cssRules}catch(ex){pollCount+=1;if(pollCount<200){setTimeout(function(){pollGecko(node)},50)}else{hasRules&&finish("css")}return}finish("css")}function pollWebKit(){var css=pending.css,i;if(css){i=styleSheets.length;while(--i>=0){if(styleSheets[i].href===css.urls[0]){finish("css");break}}pollCount+=1;if(css){if(pollCount<200){setTimeout(pollWebKit,50)}else{finish("css")}}}}return{css:function(urls,callback,obj,context){load("css",urls,callback,obj,context)},js:function(urls,callback,obj,context){load("js",urls,callback,obj,context)}}}(this.document);(function(window,$,undefined){"use strict";var $event=$.event,dispatchMethod=$.event.handle?"handle":"dispatch",resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler)},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler)},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout)}resizeTimeout=setTimeout(function(){$event[dispatchMethod].apply(context,args)},execAsap==="execAsap"?0:100)}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"])};$.Mason=function(options,element){this.element=$(element);this._create(options);this._init()};$.Mason.settings={isResizable:true,isAnimated:false,animationOptions:{queue:false,duration:500},gutterWidth:0,isRTL:false,isFitWidth:false,containerStyle:{position:"relative"}};$.Mason.prototype={_filterFindBricks:function($elems){var selector=this.options.itemSelector;return!selector?$elems:$elems.filter(selector).add($elems.find(selector))},_getBricks:function($elems){var $bricks=this._filterFindBricks($elems).css({position:"absolute"}).addClass("masonry-brick");return $bricks},_create:function(options){this.options=$.extend(true,{},$.Mason.settings,options);this.styleQueue=[];var elemStyle=this.element[0].style;this.originalStyle={height:elemStyle.height||""};var containerStyle=this.options.containerStyle;for(var prop in containerStyle){this.originalStyle[prop]=elemStyle[prop]||""}this.element.css(containerStyle);this.horizontalDirection=this.options.isRTL?"right":"left";var x=this.element.css("padding-"+this.horizontalDirection);var y=this.element.css("padding-top");this.offset={x:x?parseInt(x,10):0,y:y?parseInt(y,10):0};this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth==="function";var instance=this;setTimeout(function(){instance.element.addClass("masonry")},0);if(this.options.isResizable){$(window).bind("smartresize.masonry",function(){instance.resize()})}this.reloadItems()},_init:function(callback){this._getColumns();this._reLayout(callback)},option:function(key,value){if($.isPlainObject(key)){this.options=$.extend(true,this.options,key)}},layout:function($bricks,callback){for(var i=0,len=$bricks.length;i<len;i++){this._placeBrick($bricks[i])}var containerSize={};containerSize.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var unusedCols=0;i=this.cols;while(--i){if(this.colYs[i]!==0){break}unusedCols++}containerSize.width=(this.cols-unusedCols)*this.columnWidth-this.options.gutterWidth}this.styleQueue.push({$el:this.element,style:containerSize});var styleFn=!this.isLaidOut?"css":this.options.isAnimated?"animate":"css",animOpts=this.options.animationOptions;var obj;for(i=0,len=this.styleQueue.length;i<len;i++){obj=this.styleQueue[i];obj.$el[styleFn](obj.style,animOpts)}this.styleQueue=[];if(callback){callback.call($bricks)}this.isLaidOut=true},_getColumns:function(){var container=this.options.isFitWidth?this.element.parent():this.element,containerWidth=container.width();this.columnWidth=this.isFluid?this.options.columnWidth(containerWidth):this.options.columnWidth||this.$bricks.outerWidth(true)||containerWidth;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((containerWidth+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1)},_placeBrick:function(brick){var $brick=$(brick),colSpan,groupCount,groupY,groupColY,j;colSpan=Math.ceil($brick.outerWidth(true)/this.columnWidth);colSpan=Math.min(colSpan,this.cols);if(colSpan===1){groupY=this.colYs}else{groupCount=this.cols+1-colSpan;groupY=[];for(j=0;j<groupCount;j++){groupColY=this.colYs.slice(j,j+colSpan);groupY[j]=Math.max.apply(Math,groupColY)}}var minimumY=Math.min.apply(Math,groupY),shortCol=0;for(var i=0,len=groupY.length;i<len;i++){if(groupY[i]===minimumY){shortCol=i;break}}var position={top:minimumY+this.offset.y};position[this.horizontalDirection]=this.columnWidth*shortCol+this.offset.x;this.styleQueue.push({$el:$brick,style:position});var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.cols+1-len;for(i=0;i<setSpan;i++){this.colYs[shortCol+i]=setHeight}},resize:function(){var prevColCount=this.cols;this._getColumns();if(this.isFluid||this.cols!==prevColCount){this._reLayout()}},_reLayout:function(callback){var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0)}this.layout(this.$bricks,callback)},reloadItems:function(){this.$bricks=this._getBricks(this.element.children())},reload:function(callback){this.reloadItems();this._init(callback)},appended:function($content,isAnimatedFromBottom,callback){if(isAnimatedFromBottom){this._filterFindBricks($content).css({top:this.element.height()});var instance=this;setTimeout(function(){instance._appended($content,callback)},1)}else{this._appended($content,callback)}},_appended:function($content,callback){var $newBricks=this._getBricks($content);this.$bricks=this.$bricks.add($newBricks);this.layout($newBricks,callback)},remove:function($content){this.$bricks=this.$bricks.not($content);$content.remove()},destroy:function(){this.$bricks.removeClass("masonry-brick").each(function(){this.style.position="";this.style.top="";this.style.left=""});var elemStyle=this.element[0].style;for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop]}this.element.unbind(".masonry").removeClass("masonry").removeData("masonry");$(window).unbind(".masonry")}};$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find("img").add($this.filter("img")),len=$images.length,blank="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",loaded=[];function triggerCallback(){callback.call($this,$images)}function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind(".imagesLoaded",imgLoaded)}}}if(!len){triggerCallback()}$images.bind("load.imagesLoaded error.imagesLoaded",imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src});return $this};var logError=function(message){if(window.console){window.console.error(message)}};$.fn.masonry=function(options){if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"masonry");if(!instance){logError("cannot call methods on masonry prior to initialization; "+"attempted to call method '"+options+"'");return}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for masonry instance");return}instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,"masonry");if(instance){instance.option(options||{});instance._init()}else{$.data(this,"masonry",new $.Mason(options,this))}})}return this}})(window,jQuery);window.mapStyle=[{featureType:"landscape",stylers:[{saturation:-95}]},{featureType:"poi",stylers:[{saturation:-96}]},{featureType:"water",stylers:[{saturation:-100},{lightness:34}]},{featureType:"road",elementType:"geometry",stylers:[{hue:"#ee3fac"},{lightness:19},{saturation:-35}]},{elementType:"labels",stylers:[{lightness:18},{saturation:-100}]}];(function(w){"use strict";w.picturefill=function(){var ps=w.document.getElementsByTagName("div");for(var i=0,il=ps.length;i<il;i++){if(ps[i].getAttribute("data-picture")!==null){var sources=ps[i].getElementsByTagName("div"),matches=[];for(var j=0,jl=sources.length;j<jl;j++){var media=sources[j].getAttribute("data-media");if(!media||w.matchMedia&&w.matchMedia(media).matches){matches.push(sources[j])}}var picImg=ps[i].getElementsByTagName("img")[0];if(matches.length){if(!picImg){picImg=w.document.createElement("img");picImg.alt=ps[i].getAttribute("data-alt");ps[i].appendChild(picImg)}picImg.src=matches.pop().getAttribute("data-src")}else if(picImg){ps[i].removeChild(picImg)}}}};if(w.addEventListener){w.addEventListener("resize",w.picturefill,false);w.addEventListener("DOMContentLoaded",function(){w.picturefill();w.removeEventListener("load",w.picturefill,false)},false);w.addEventListener("load",w.picturefill,false)}else if(w.attachEvent){w.attachEvent("onload",w.picturefill)}})(this);function Hammer(element,options,undefined){var self=this;var defaults=mergeObject({prevent_default:false,css_hacks:true,swipe:true,swipe_time:200,swipe_min_distance:20,drag:true,drag_vertical:true,drag_horizontal:true,drag_min_distance:20,transform:true,scale_treshold:.1,rotation_treshold:15,tap:true,tap_double:true,tap_max_interval:300,tap_max_distance:10,tap_double_distance:20,hold:true,hold_timeout:500},Hammer.defaults||{});options=mergeObject(defaults,options);(function(){if(!options.css_hacks){return false}var vendors=["webkit","moz","ms","o",""];var css_props={userSelect:"none",touchCallout:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"};var prop="";for(var i=0;i<vendors.length;i++){for(var p in css_props){prop=p;if(vendors[i]){prop=vendors[i]+prop.substring(0,1).toUpperCase()+prop.substring(1)}element.style[prop]=css_props[p]}}})();var _distance=0;var _angle=0;var _direction=0;var _pos={};var _fingers=0;var _first=false;var _gesture=null;var _prev_gesture=null;var _touch_start_time=null;var _prev_tap_pos={x:0,y:0};var _prev_tap_end_time=null;var _hold_timer=null;var _offset={};var _mousedown=false;var _event_start;var _event_move;var _event_end;var _has_touch="ontouchstart"in window;var _can_tap=false;this.option=function(key,val){if(val!==undefined){options[key]=val}return options[key]};this.getDirectionFromAngle=function(angle){var directions={down:angle>=45&&angle<135,left:angle>=135||angle<=-135,up:angle<-45&&angle>-135,right:angle>=-45&&angle<=45};var direction,key;for(key in directions){if(directions[key]){direction=key;break}}return direction};this.destroy=function(){if(_has_touch){removeEvent(element,"touchstart touchmove touchend touchcancel",handleEvents)}else{removeEvent(element,"mouseup mousedown mousemove",handleEvents);removeEvent(element,"mouseout",handleMouseOut)}};function countFingers(event){return event.touches?event.touches.length:1}function getXYfromEvent(event){event=event||window.event;if(!_has_touch){var doc=document,body=doc.body;return[{x:event.pageX||event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&doc.clientLeft||0),y:event.pageY||event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&doc.clientTop||0)}]}else{var pos=[],src;for(var t=0,len=event.touches.length;t<len;t++){src=event.touches[t];pos.push({x:src.pageX,y:src.pageY})}return pos}}function getAngle(pos1,pos2){return Math.atan2(pos2.y-pos1.y,pos2.x-pos1.x)*180/Math.PI}function getDistance(pos1,pos2){var x=pos2.x-pos1.x,y=pos2.y-pos1.y;return Math.sqrt(x*x+y*y)}function calculateScale(pos_start,pos_move){if(pos_start.length==2&&pos_move.length==2){var start_distance=getDistance(pos_start[0],pos_start[1]);var end_distance=getDistance(pos_move[0],pos_move[1]);return end_distance/start_distance}return 0}function calculateRotation(pos_start,pos_move){if(pos_start.length==2&&pos_move.length==2){var start_rotation=getAngle(pos_start[1],pos_start[0]);var end_rotation=getAngle(pos_move[1],pos_move[0]);return end_rotation-start_rotation}return 0}function triggerEvent(eventName,params){params.touches=getXYfromEvent(params.originalEvent);params.type=eventName;if(isFunction(self["on"+eventName])){self["on"+eventName].call(self,params)}}function cancelEvent(event){event=event||window.event;if(event.preventDefault){event.preventDefault();event.stopPropagation()}else{event.returnValue=false;event.cancelBubble=true}}function reset(){_pos={};_first=false;_fingers=0;_distance=0;_angle=0;_gesture=null}var gestures={hold:function(event){if(options.hold){_gesture="hold";clearTimeout(_hold_timer);_hold_timer=setTimeout(function(){if(_gesture=="hold"){triggerEvent("hold",{originalEvent:event,position:_pos.start})}},options.hold_timeout)}},swipe:function(event){if(!_pos.move||_gesture==="transform"){return}var _distance_x=_pos.move[0].x-_pos.start[0].x;var _distance_y=_pos.move[0].y-_pos.start[0].y;_distance=Math.sqrt(_distance_x*_distance_x+_distance_y*_distance_y);var now=(new Date).getTime();var touch_time=now-_touch_start_time;if(options.swipe&&options.swipe_time>touch_time&&_distance>options.swipe_min_distance){_angle=getAngle(_pos.start[0],_pos.move[0]);_direction=self.getDirectionFromAngle(_angle);_gesture="swipe";var position={x:_pos.move[0].x-_offset.left,y:_pos.move[0].y-_offset.top};var event_obj={originalEvent:event,position:position,direction:_direction,distance:_distance,distanceX:_distance_x,distanceY:_distance_y,angle:_angle};triggerEvent("swipe",event_obj)}},drag:function(event){var _distance_x=_pos.move[0].x-_pos.start[0].x;var _distance_y=_pos.move[0].y-_pos.start[0].y;_distance=Math.sqrt(_distance_x*_distance_x+_distance_y*_distance_y);if(options.drag&&_distance>options.drag_min_distance||_gesture=="drag"){_angle=getAngle(_pos.start[0],_pos.move[0]);_direction=self.getDirectionFromAngle(_angle);var is_vertical=_direction=="up"||_direction=="down";if((is_vertical&&!options.drag_vertical||!is_vertical&&!options.drag_horizontal)&&_distance>options.drag_min_distance){return}_gesture="drag";var position={x:_pos.move[0].x-_offset.left,y:_pos.move[0].y-_offset.top};var event_obj={originalEvent:event,position:position,direction:_direction,distance:_distance,distanceX:_distance_x,distanceY:_distance_y,angle:_angle};if(_first){triggerEvent("dragstart",event_obj);_first=false}triggerEvent("drag",event_obj);cancelEvent(event)}},transform:function(event){if(options.transform){var count=countFingers(event);if(count!==2){return false}var rotation=calculateRotation(_pos.start,_pos.move);var scale=calculateScale(_pos.start,_pos.move);if(_gesture==="transform"||Math.abs(1-scale)>options.scale_treshold||Math.abs(rotation)>options.rotation_treshold){_gesture="transform";_pos.center={x:(_pos.move[0].x+_pos.move[1].x)/2-_offset.left,y:(_pos.move[0].y+_pos.move[1].y)/2-_offset.top};if(_first)_pos.startCenter=_pos.center;var _distance_x=_pos.center.x-_pos.startCenter.x;var _distance_y=_pos.center.y-_pos.startCenter.y;_distance=Math.sqrt(_distance_x*_distance_x+_distance_y*_distance_y);var event_obj={originalEvent:event,position:_pos.center,scale:scale,rotation:rotation,distance:_distance,distanceX:_distance_x,distanceY:_distance_y};if(_first){triggerEvent("transformstart",event_obj);_first=false}triggerEvent("transform",event_obj);cancelEvent(event);return true}}return false},tap:function(event){var now=(new Date).getTime();var touch_time=now-_touch_start_time;if(options.hold&&!(options.hold&&options.hold_timeout>touch_time)){return}var is_double_tap=function(){if(_prev_tap_pos&&options.tap_double&&_prev_gesture=="tap"&&_pos.start&&_touch_start_time-_prev_tap_end_time<options.tap_max_interval){var x_distance=Math.abs(_prev_tap_pos[0].x-_pos.start[0].x);var y_distance=Math.abs(_prev_tap_pos[0].y-_pos.start[0].y);return _prev_tap_pos&&_pos.start&&Math.max(x_distance,y_distance)<options.tap_double_distance}return false}();if(is_double_tap){_gesture="double_tap";_prev_tap_end_time=null;triggerEvent("doubletap",{originalEvent:event,position:_pos.start});cancelEvent(event)}else{var x_distance=_pos.move?Math.abs(_pos.move[0].x-_pos.start[0].x):0;var y_distance=_pos.move?Math.abs(_pos.move[0].y-_pos.start[0].y):0;_distance=Math.max(x_distance,y_distance);if(_distance<options.tap_max_distance){_gesture="tap";_prev_tap_end_time=now;_prev_tap_pos=_pos.start;if(options.tap){triggerEvent("tap",{originalEvent:event,position:_pos.start});cancelEvent(event)}}}}};function handleEvents(event){var count;switch(event.type){case"mousedown":case"touchstart":count=countFingers(event);_can_tap=count===1;if(count===2&&_gesture==="drag"){triggerEvent("dragend",{originalEvent:event,direction:_direction,distance:_distance,angle:_angle})}_setup();if(options.prevent_default){cancelEvent(event)}break;case"mousemove":case"touchmove":count=countFingers(event);if(!_mousedown&&count===1){return false}else if(!_mousedown&&count===2){_can_tap=false;reset();_setup()}_event_move=event;_pos.move=getXYfromEvent(event);if(!gestures.transform(event)){gestures.drag(event)}break;case"mouseup":case"mouseout":case"touchcancel":case"touchend":var callReset=true;_mousedown=false;_event_end=event;gestures.swipe(event);if(_gesture=="drag"){triggerEvent("dragend",{originalEvent:event,direction:_direction,distance:_distance,angle:_angle})}else if(_gesture=="transform"){var _distance_x=_pos.center.x-_pos.startCenter.x;var _distance_y=_pos.center.y-_pos.startCenter.y;triggerEvent("transformend",{originalEvent:event,position:_pos.center,scale:calculateScale(_pos.start,_pos.move),rotation:calculateRotation(_pos.start,_pos.move),distance:_distance,distanceX:_distance_x,distanceY:_distance_y});if(countFingers(event)===1){reset();_setup();callReset=false}}else if(_can_tap){gestures.tap(_event_start)}_prev_gesture=_gesture;triggerEvent("release",{originalEvent:event,gesture:_gesture,position:_pos.move||_pos.start});if(callReset){reset()}break}function _setup(){_pos.start=getXYfromEvent(event);_touch_start_time=(new Date).getTime();_fingers=countFingers(event);_first=true;_event_start=event;var box=element.getBoundingClientRect();var clientTop=element.clientTop||document.body.clientTop||0;var clientLeft=element.clientLeft||document.body.clientLeft||0;var scrollTop=window.pageYOffset||element.scrollTop||document.body.scrollTop;var scrollLeft=window.pageXOffset||element.scrollLeft||document.body.scrollLeft;_offset={top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-clientLeft};_mousedown=true;gestures.hold(event)}}function handleMouseOut(event){if(!isInsideHammer(element,event.relatedTarget)){handleEvents(event)}}if(_has_touch){addEvent(element,"touchstart touchmove touchend touchcancel",handleEvents)}else{addEvent(element,"mouseup mousedown mousemove",handleEvents);addEvent(element,"mouseout",handleMouseOut)}function isInsideHammer(parent,child){if(!child&&window.event&&window.event.toElement){child=window.event.toElement}if(parent===child){return true}if(child){var node=child.parentNode;while(node!==null){if(node===parent){return true}node=node.parentNode}}return false}function mergeObject(obj1,obj2){var output={};if(!obj2){return obj1}for(var prop in obj1){if(prop in obj2){output[prop]=obj2[prop]}else{output[prop]=obj1[prop]}}return output}function isFunction(obj){return Object.prototype.toString.call(obj)=="[object Function]"}function addEvent(element,types,callback){types=types.split(" ");for(var t=0,len=types.length;t<len;t++){if(element.addEventListener){element.addEventListener(types[t],callback,false)}else if(document.attachEvent){element.attachEvent("on"+types[t],callback)}}}function removeEvent(element,types,callback){types=types.split(" ");for(var t=0,len=types.length;t<len;t++){if(element.removeEventListener){element.removeEventListener(types[t],callback,false)}else if(document.detachEvent){element.detachEvent("on"+types[t],callback)}}}}function PxLoader(settings){settings=settings||{};if(settings.statusInterval==null){settings.statusInterval=5e3}if(settings.loggingDelay==null){settings.loggingDelay=20*1e3}if(settings.noProgressTimeout==null){settings.noProgressTimeout=Infinity}var entries=[],progressListeners=[],timeStarted,progressChanged=+new Date;var ResourceState={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4};var ensureArray=function(val){if(val==null){return[]}if(Array.isArray(val)){return val}return[val]};this.add=function(resource){resource.tags=new PxLoaderTags(resource.tags);if(resource.priority==null){resource.priority=Infinity}entries.push({resource:resource,status:ResourceState.QUEUED})};this.addProgressListener=function(callback,tags){progressListeners.push({callback:callback,tags:new PxLoaderTags(tags)})};this.addCompletionListener=function(callback,tags){progressListeners.push({tags:new PxLoaderTags(tags),callback:function(e){if(e.completedCount===e.totalCount){callback()}}})};var getResourceSort=function(orderedTags){orderedTags=ensureArray(orderedTags);var getTagOrder=function(entry){var resource=entry.resource,bestIndex=Infinity;for(var i=0;i<resource.tags.length;i++){for(var j=0;j<Math.min(orderedTags.length,bestIndex);j++){if(resource.tags[i]==orderedTags[j]&&j<bestIndex){bestIndex=j;if(bestIndex===0)break}if(bestIndex===0)break}}return bestIndex};return function(a,b){var aOrder=getTagOrder(a),bOrder=getTagOrder(b);if(aOrder<bOrder)return-1;if(aOrder>bOrder)return 1;if(a.priority<b.priority)return-1;if(a.priority>b.priority)return 1;return 0}};this.start=function(orderedTags){timeStarted=+new Date;var compareResources=getResourceSort(orderedTags);entries.sort(compareResources);for(var i=0,len=entries.length;i<len;i++){var entry=entries[i];entry.status=ResourceState.WAITING;entry.resource.start(this)}setTimeout(statusCheck,100)};var statusCheck=function(){var checkAgain=false,noProgressTime=+new Date-progressChanged,timedOut=noProgressTime>=settings.noProgressTimeout,shouldLog=noProgressTime>=settings.loggingDelay;for(var i=0,len=entries.length;i<len;i++){var entry=entries[i];if(entry.status!==ResourceState.WAITING){continue}if(entry.resource.checkStatus){entry.resource.checkStatus()}if(entry.status===ResourceState.WAITING){if(timedOut){entry.resource.onTimeout()}else{checkAgain=true}}}if(shouldLog&&checkAgain){log()}if(checkAgain){setTimeout(statusCheck,settings.statusInterval)}};this.isBusy=function(){for(var i=0,len=entries.length;i<len;i++){if(entries[i].status===ResourceState.QUEUED||entries[i].status===ResourceState.WAITING){return true}}return false};var onProgress=function(resource,statusType){var entry=null;for(var i=0,len=entries.length;i<len;i++){if(entries[i].resource===resource){entry=entries[i];break}}if(entry==null||entry.status!==ResourceState.WAITING){return}entry.status=statusType;progressChanged=+new Date;var numResourceTags=resource.tags.length;for(var i=0,numListeners=progressListeners.length;i<numListeners;i++){var listener=progressListeners[i],shouldCall;if(listener.tags.length===0){shouldCall=true}else{shouldCall=resource.tags.contains(listener.tags)}if(shouldCall){sendProgress(entry,listener)}}};this.onLoad=function(resource){onProgress(resource,ResourceState.LOADED)};this.onError=function(resource){onProgress(resource,ResourceState.ERROR)};this.onTimeout=function(resource){onProgress(resource,ResourceState.TIMEOUT)};var sendProgress=function(updatedEntry,listener){var completed=0,total=0;for(var i=0,len=entries.length;i<len;i++){var entry=entries[i],includeResource=false;if(listener.tags.length===0){includeResource=true}else{includeResource=entry.resource.tags.contains(listener.tags)}if(includeResource){total++;if(entry.status===ResourceState.LOADED||entry.status===ResourceState.ERROR||entry.status===ResourceState.TIMEOUT){completed++}}}listener.callback({resource:updatedEntry.resource,loaded:updatedEntry.status===ResourceState.LOADED,error:updatedEntry.status===ResourceState.ERROR,timeout:updatedEntry.status===ResourceState.TIMEOUT,completedCount:completed,totalCount:total})};var log=this.log=function(showAll){if(!window.console){return}var elapsedSeconds=Math.round((+new Date-timeStarted)/1e3);window.console.log("PxLoader elapsed: "+elapsedSeconds+" sec");for(var i=0,len=entries.length;i<len;i++){var entry=entries[i];if(!showAll&&entry.status!==ResourceState.WAITING){continue}var message="PxLoader: #"+i+" "+entry.resource.getName();switch(entry.status){case ResourceState.QUEUED:message+=" (Not Started)";break;case ResourceState.WAITING:message+=" (Waiting)";break;case ResourceState.LOADED:message+=" (Loaded)";break;case ResourceState.ERROR:message+=" (Error)";break;case ResourceState.TIMEOUT:message+=" (Timeout)";break}if(entry.resource.tags.length>0){message+=" Tags: ["+entry.resource.tags.join(",")+"]"}window.console.log(message)}}}function PxLoaderTags(values){this.array=[];this.object={};this.value=null;this.length=0;if(values!==null&&values!==undefined){if(Array.isArray(values)){this.array=values}else if(typeof values==="object"){for(var key in values){this.array.push(key)}}else{this.array.push(values);this.value=values}this.length=this.array.length;for(var i=0;i<this.length;i++){this.object[this.array[i]]=true}}this.contains=function(other){if(this.length===0||other.length===0){return false}else if(this.length===1&&this.value!==null){if(other.length===1){return this.value===other.value}else{return other.object.hasOwnProperty(this.value)}}else if(other.length<this.length){return other.contains(this)
}else{for(var key in this.object){if(other.object[key]){return true}}return false}}}if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)=="[object Array]"}}function PxLoaderImage(url,tags,priority){var self=this,loader=null;this.img=new Image;this.tags=tags;this.priority=priority;var onReadyStateChange=function(){if(self.img.readyState=="complete"){removeEventHandlers();loader.onLoad(self)}};var onLoad=function(){removeEventHandlers();loader.onLoad(self)};var onError=function(){removeEventHandlers();loader.onError(self)};var removeEventHandlers=function(){self.unbind("load",onLoad);self.unbind("readystatechange",onReadyStateChange);self.unbind("error",onError)};this.start=function(pxLoader){loader=pxLoader;self.bind("load",onLoad);self.bind("readystatechange",onReadyStateChange);self.bind("error",onError);self.img.src=url};this.checkStatus=function(){if(self.img.complete){removeEventHandlers();loader.onLoad(self)}};this.onTimeout=function(){removeEventHandlers();if(self.img.complete){loader.onLoad(self)}else{loader.onTimeout(self)}};this.getName=function(){return url};this.bind=function(eventName,eventHandler){if(self.img.addEventListener){self.img.addEventListener(eventName,eventHandler,false)}else if(self.img.attachEvent){self.img.attachEvent("on"+eventName,eventHandler)}};this.unbind=function(eventName,eventHandler){if(self.img.removeEventListener){self.img.removeEventListener(eventName,eventHandler,false)}else if(self.img.detachEvent){self.img.detachEvent("on"+eventName,eventHandler)}}}PxLoader.prototype.addImage=function(url,tags,priority){var imageLoader=new PxLoaderImage(url,tags,priority);this.add(imageLoader);return imageLoader.img};jQuery.fn.hammer=function(options){return this.each(function(){var hammer=new Hammer(this,options);var $el=jQuery(this);$el.data("hammer",hammer);var events=["hold","tap","doubletap","transformstart","transform","transformend","dragstart","drag","dragend","swipe","release"];for(var e=0;e<events.length;e++){hammer["on"+events[e]]=function(el,eventName){return function(ev){el.trigger(jQuery.Event(eventName,ev))}}($el,events[e])}})};(function(module){if(typeof define==="function"&&define.amd){define(["jquery"],module)}else{module(jQuery)}})(function(jQuery,undefined){var threshold=6,add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node)},requestFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn()},25)}}(),ignoreTags={textarea:true,input:true,select:true,button:true},mouseevents={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},touchevents={move:"touchmove",cancel:"touchend",end:"touchend"};function Timer(fn){var callback=fn,active=false,running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false}else{running=false}}this.kick=function(fn){active=true;if(!running){trigger()}};this.end=function(fn){var cb=callback;if(!fn){return}if(!running){fn()}else{callback=active?function(){cb();fn()}:fn;active=true}}}function returnTrue(){return true}function returnFalse(){return false}function preventDefault(e){e.preventDefault()}function preventIgnoreTags(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return}e.preventDefault()}function isLeftButton(e){return e.which===1&&!e.ctrlKey&&!e.altKey}function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id)}i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i]}}}function changedTouch(e,event){var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return}if(touch.pageX===event.pageX&&touch.pageY===event.pageY){return}return touch}function mousedown(e){var data;if(!isLeftButton(e)){return}data={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};add(document,mouseevents.move,mousemove,data);add(document,mouseevents.cancel,mouseend,data)}function mousemove(e){var data=e.data;checkThreshold(e,data,e,removeMouse)}function mouseend(e){removeMouse()}function removeMouse(){remove(document,mouseevents.move,mousemove);remove(document,mouseevents.cancel,mouseend)}function touchstart(e){var touch,template;if(ignoreTags[e.target.tagName.toLowerCase()]){return}touch=e.changedTouches[0];template={target:touch.target,startX:touch.pageX,startY:touch.pageY,timeStamp:e.timeStamp,identifier:touch.identifier};add(document,touchevents.move+"."+touch.identifier,touchmove,template);add(document,touchevents.cancel+"."+touch.identifier,touchend,template)}function touchmove(e){var data=e.data,touch=changedTouch(e,data);if(!touch){return}checkThreshold(e,data,touch,removeTouch)}function touchend(e){var template=e.data,touch=identifiedTouch(e.changedTouches,template.identifier);if(!touch){return}removeTouch(template.identifier)}function removeTouch(identifier){remove(document,"."+identifier,touchmove);remove(document,"."+identifier,touchend)}function checkThreshold(e,template,touch,fn){var distX=touch.pageX-template.startX,distY=touch.pageY-template.startY;if(distX*distX+distY*distY<threshold*threshold){return}triggerStart(e,template,touch,distX,distY,fn)}function handled(){this._handled=returnTrue;return false}function flagAsHandled(e){e._handled()}function triggerStart(e,template,touch,distX,distY,fn){var node=template.target,touches,time;touches=e.targetTouches;time=e.timeStamp-template.timeStamp;template.type="movestart";template.distX=distX;template.distY=distY;template.deltaX=distX;template.deltaY=distY;template.pageX=touch.pageX;template.pageY=touch.pageY;template.velocityX=distX/time;template.velocityY=distY/time;template.targetTouches=touches;template.finger=touches?touches.length:1;template._handled=handled;template._preventTouchmoveDefault=function(){e.preventDefault()};trigger(template.target,template);fn(template.identifier)}function activeMousemove(e){var event=e.data.event,timer=e.data.timer;updateEvent(event,e,e.timeStamp,timer)}function activeMouseend(e){var event=e.data.event,timer=e.data.timer;removeActiveMouse();endEvent(event,timer,function(){setTimeout(function(){remove(event.target,"click",returnFalse)},0)})}function removeActiveMouse(event){remove(document,mouseevents.move,activeMousemove);remove(document,mouseevents.end,activeMouseend)}function activeTouchmove(e){var event=e.data.event,timer=e.data.timer,touch=changedTouch(e,event);if(!touch){return}e.preventDefault();event.targetTouches=e.targetTouches;updateEvent(event,touch,e.timeStamp,timer)}function activeTouchend(e){var event=e.data.event,timer=e.data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return}removeActiveTouch(event);endEvent(event,timer)}function removeActiveTouch(event){remove(document,"."+event.identifier,activeTouchmove);remove(document,"."+event.identifier,activeTouchend)}function updateEvent(event,touch,timeStamp,timer){var time=timeStamp-event.timeStamp;event.type="move";event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=.3*event.velocityX+.7*event.deltaX/time;event.velocityY=.3*event.velocityY+.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY;timer.kick()}function endEvent(event,timer,fn){timer.end(function(){event.type="moveend";trigger(event.target,event);return fn&&fn()})}function setup(data,namespaces,eventHandle){add(this,"movestart.move",flagAsHandled);return true}function teardown(namespaces){remove(this,"dragstart drag",preventDefault);remove(this,"mousedown touchstart",preventIgnoreTags);remove(this,"movestart",flagAsHandled);return true}function addMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return}add(this,"dragstart."+handleObj.guid+" drag."+handleObj.guid,preventDefault,undefined,handleObj.selector);add(this,"mousedown."+handleObj.guid,preventIgnoreTags,undefined,handleObj.selector)}function removeMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return}remove(this,"dragstart."+handleObj.guid+" drag."+handleObj.guid);remove(this,"mousedown."+handleObj.guid)}jQuery.event.special.movestart={setup:setup,teardown:teardown,add:addMethod,remove:removeMethod,_default:function(e){var template,data;if(!e._handled()){return}template={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};data={event:template,timer:new Timer(function(time){trigger(e.target,template)})};if(e.identifier===undefined){add(e.target,"click",returnFalse);add(document,mouseevents.move,activeMousemove,data);add(document,mouseevents.end,activeMouseend,data)}else{e._preventTouchmoveDefault();add(document,touchevents.move+"."+e.identifier,activeTouchmove,data);add(document,touchevents.end+"."+e.identifier,activeTouchend,data)}}};jQuery.event.special.move={setup:function(){add(this,"movestart.move",jQuery.noop)},teardown:function(){remove(this,"movestart.move",jQuery.noop)}};jQuery.event.special.moveend={setup:function(){add(this,"movestart.moveend",jQuery.noop)},teardown:function(){remove(this,"movestart.moveend",jQuery.noop)}};add(document,"mousedown.move",mousedown);add(document,"touchstart.move",touchstart);if(typeof Array.prototype.indexOf==="function"){(function(jQuery,undefined){var props=["changedTouches","targetTouches"],l=props.length;while(l--){if(jQuery.event.props.indexOf(props[l])===-1){jQuery.event.props.push(props[l])}}})(jQuery)}});(function(module){if(typeof define==="function"&&define.amd){define(["jquery"],module)}else{module(jQuery)}})(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node)},settings={threshold:.4,sensitivity:6};function moveend(e){var w,h,event;w=e.target.offsetWidth;h=e.target.offsetHeight;event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type="swiperight";trigger(e.currentTarget,event)}}else{if(-e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type="swipeup";trigger(e.currentTarget,event)}}}else{if(e.distX>-e.distY){if(e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type="swipedown";trigger(e.currentTarget,event)}}else{if(-e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type="swipeleft";trigger(e.currentTarget,event)}}}}function getData(node){var data=jQuery.data(node,"event_swipe");if(!data){data={count:0};jQuery.data(node,"event_swipe",data)}return data}jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){var data=getData(this);if(data.count++>0){return}add(this,"moveend",moveend);return true},teardown:function(){var data=getData(this);if(--data.count>0){return}remove(this,"moveend",moveend);return true},settings:settings}});(function($){$.expander={version:"1.4.5",defaults:{slicePoint:100,preserveWords:true,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:false,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:true,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}};$.fn.expander=function(options){var meth="init";if(typeof options=="string"){meth=options;options={}}var opts=$.extend({},$.expander.defaults,options),rSelfClose=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,rAmpWordEnd=opts.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,rOpenCloseTag=/<\/?(\w+)[^>]*>/g,rOpenTag=/<(\w+)[^>]*>/g,rCloseTag=/<\/(\w+)>/g,rLastCloseTag=/(<\/[^>]+>)\s*$/,rTagPlus=/^<[^>]+>.?/,delayedCollapse;var methods={init:function(){this.each(function(){var i,l,tmp,newChar,summTagless,summOpens,summCloses,lastCloseTag,detailText,detailTagless,html,expand,$thisDetails,$readMore,openTagsForDetails=[],closeTagsForsummaryText=[],defined={},thisEl=this,$this=$(this),$summEl=$([]),o=$.extend({},opts,$this.data("expander")||$.meta&&$this.data()||{}),hasDetails=!!$this.find("."+o.detailClass).length,hasBlocks=!!$this.find("*").filter(function(){var display=$(this).css("display");return/^block|table|list/.test(display)}).length,el=hasBlocks?"div":"span",detailSelector=el+"."+o.detailClass,moreClass=o.moreClass+"",lessClass=o.lessClass+"",expandSpeed=o.expandSpeed||0,allHtml=$.trim($this.html()),allText=$.trim($this.text()),summaryText=allHtml.slice(0,o.slicePoint);o.moreSelector="span."+moreClass.split(" ").join(".");o.lessSelector="span."+lessClass.split(" ").join(".");if($.data(this,"expanderInit")){return}$.data(this,"expanderInit",true);$.data(this,"expander",o);$.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(index,val){defined[val]=$.isFunction(o[val])});summaryText=backup(summaryText);summTagless=summaryText.replace(rOpenCloseTag,"").length;while(summTagless<o.slicePoint){newChar=allHtml.charAt(summaryText.length);if(newChar=="<"){newChar=allHtml.slice(summaryText.length).match(rTagPlus)[0]}summaryText+=newChar;summTagless++}summaryText=backup(summaryText,o.preserveWords);summOpens=summaryText.match(rOpenTag)||[];summCloses=summaryText.match(rCloseTag)||[];tmp=[];$.each(summOpens,function(index,val){if(!rSelfClose.test(val)){tmp.push(val)}});summOpens=tmp;l=summCloses.length;for(i=0;i<l;i++){summCloses[i]=summCloses[i].replace(rCloseTag,"$1")}$.each(summOpens,function(index,val){var thisTagName=val.replace(rOpenTag,"$1");var closePosition=$.inArray(thisTagName,summCloses);if(closePosition===-1){openTagsForDetails.push(val);closeTagsForsummaryText.push("</"+thisTagName+">")}else{summCloses.splice(closePosition,1)}});closeTagsForsummaryText.reverse();if(!hasDetails){detailText=allHtml.slice(summaryText.length);detailTagless=$.trim(detailText.replace(rOpenCloseTag,""));if(detailTagless===""||detailTagless.split(/\s+/).length<o.widow){return}lastCloseTag=closeTagsForsummaryText.pop()||"";summaryText+=closeTagsForsummaryText.join("");detailText=openTagsForDetails.join("")+detailText}else{detailText=$this.find(detailSelector).remove().html();summaryText=$this.html();allHtml=summaryText+detailText;lastCloseTag=""}o.moreLabel=$this.find(o.moreSelector).length?"":buildMoreLabel(o);if(hasBlocks){detailText=allHtml}summaryText+=lastCloseTag;o.summary=summaryText;o.details=detailText;o.lastCloseTag=lastCloseTag;if(defined.onSlice){tmp=o.onSlice.call(thisEl,o);o=tmp&&tmp.details?tmp:o}html=buildHTML(o,hasBlocks);$this.html(html);$thisDetails=$this.find(detailSelector);$readMore=$this.find(o.moreSelector);if(o.collapseEffect==="slideUp"&&o.expandEffect!=="slideDown"||$this.is(":hidden")){$thisDetails.css({display:"none"})}else{$thisDetails[o.collapseEffect](0)}$summEl=$this.find("div."+o.summaryClass);expand=function(event){event.preventDefault();$readMore.hide();$summEl.hide();if(defined.beforeExpand){o.beforeExpand.call(thisEl)}$thisDetails.stop(false,true)[o.expandEffect](expandSpeed,function(){$thisDetails.css({zoom:""});if(defined.afterExpand){o.afterExpand.call(thisEl)}delayCollapse(o,$thisDetails,thisEl)})};$readMore.find("a").unbind("click.expander").bind("click.expander",expand);if(o.userCollapse&&!$this.find(o.lessSelector).length){$this.find(detailSelector).append('<span class="'+o.lessClass+'">'+o.userCollapsePrefix+'<a href="#">'+o.userCollapseText+"</a></span>")}$this.find(o.lessSelector+" a").unbind("click.expander").bind("click.expander",function(event){event.preventDefault();clearTimeout(delayedCollapse);var $detailsCollapsed=$(this).closest(detailSelector);reCollapse(o,$detailsCollapsed);if(defined.onCollapse){o.onCollapse.call(thisEl,true)}})})},destroy:function(){this.each(function(){var o,details,$this=$(this);if(!$this.data("expanderInit")){return}o=$.extend({},$this.data("expander")||{},opts),details=$this.find("."+o.detailClass).contents();$this.removeData("expanderInit");$this.removeData("expander");$this.find(o.moreSelector).remove();$this.find("."+o.summaryClass).remove();$this.find("."+o.detailClass).after(details).remove();$this.find(o.lessSelector).remove()})}};if(methods[meth]){methods[meth].call(this)}function buildHTML(o,blocks){var el="span",summary=o.summary;if(blocks){el="div";if(rLastCloseTag.test(summary)&&!o.expandAfterSummary){summary=summary.replace(rLastCloseTag,o.moreLabel+"$1")}else{summary+=o.moreLabel}summary='<div class="'+o.summaryClass+'">'+summary+"</div>"}else{summary+=o.moreLabel}return[summary,"<",el+' class="'+o.detailClass+'"',">",o.details,"</"+el+">"].join("")}function buildMoreLabel(o){var ret='<span class="'+o.moreClass+'">'+o.expandPrefix;ret+='<a href="#">'+o.expandText+"</a></span>";return ret}function backup(txt,preserveWords){if(txt.lastIndexOf("<")>txt.lastIndexOf(">")){txt=txt.slice(0,txt.lastIndexOf("<"))}if(preserveWords){txt=txt.replace(rAmpWordEnd,"")}return $.trim(txt)}function reCollapse(o,el){el.stop(true,true)[o.collapseEffect](o.collapseSpeed,function(){var prevMore=el.prev("span."+o.moreClass).show();if(!prevMore.length){el.parent().children("div."+o.summaryClass).show().find("span."+o.moreClass).show()}if(o.afterCollapse){o.afterCollapse.call(el)}})}function delayCollapse(option,$collapseEl,thisEl){if(option.collapseTimer){delayedCollapse=setTimeout(function(){reCollapse(option,$collapseEl);if($.isFunction(option.onCollapse)){option.onCollapse.call(thisEl,false)}},option.collapseTimer)}}return this};$.fn.expander.defaults=$.expander.defaults})(jQuery);(function(window,$,undefined){"use strict";var document=window.document;var Modernizr=window.Modernizr;var capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1)};var prefixes="Moz Webkit O Ms".split(" ");var getStyleProperty=function(propName){var style=document.documentElement.style,prefixed;if(typeof style[propName]==="string"){return propName}propName=capitalize(propName);for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof style[prefixed]==="string"){return prefixed}}};var transformProp=getStyleProperty("transform"),transitionProp=getStyleProperty("transitionProperty");var tests={csstransforms:function(){return!!transformProp},csstransforms3d:function(){var test=!!getStyleProperty("perspective");if(test){var vendorCSSPrefixes=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),mediaQuery="@media ("+vendorCSSPrefixes.join("transform-3d),(")+"modernizr)",$style=$("<style>"+mediaQuery+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),$div=$('<div id="modernizr" />').appendTo("html");test=$div.height()===3;$div.remove();$style.remove()}return test},csstransitions:function(){return!!transitionProp}};var testName;if(Modernizr){for(testName in tests){if(!Modernizr.hasOwnProperty(testName)){Modernizr.addTest(testName,tests[testName])}}}else{Modernizr=window.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var classes=" ";var result;for(testName in tests){result=tests[testName]();Modernizr[testName]=result;classes+=" "+(result?"":"no-")+testName}$("html").addClass(classes)}if(Modernizr.csstransforms){var transformFnNotations=Modernizr.csstransforms3d?{translate:function(position){return"translate3d("+position[0]+"px, "+position[1]+"px, 0) "},scale:function(scale){return"scale3d("+scale+", "+scale+", 1) "}}:{translate:function(position){return"translate("+position[0]+"px, "+position[1]+"px) "},scale:function(scale){return"scale("+scale+") "}};var setIsoTransform=function(elem,name,value){var data=$.data(elem,"isoTransform")||{},newData={},fnName,transformObj={},transformValue;newData[name]=value;$.extend(data,newData);for(fnName in data){transformValue=data[fnName];transformObj[fnName]=transformFnNotations[fnName](transformValue)}var translateFn=transformObj.translate||"",scaleFn=transformObj.scale||"",valueFns=translateFn+scaleFn;$.data(elem,"isoTransform",data);elem.style[transformProp]=valueFns};$.cssNumber.scale=true;$.cssHooks.scale={set:function(elem,value){setIsoTransform(elem,"scale",value)},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.scale?transform.scale:1}};$.fx.step.scale=function(fx){$.cssHooks.scale.set(fx.elem,fx.now+fx.unit)};$.cssNumber.translate=true;$.cssHooks.translate={set:function(elem,value){setIsoTransform(elem,"translate",value)},get:function(elem,computed){var transform=$.data(elem,"isoTransform");return transform&&transform.translate?transform.translate:[0,0]}}}var transitionEndEvent,transitionDurProp;if(Modernizr.csstransitions){transitionEndEvent={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[transitionProp];transitionDurProp=getStyleProperty("transitionDuration")}var $event=$.event,resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler)},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler)},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout)}resizeTimeout=setTimeout(function(){jQuery.event.handle.apply(context,args)},execAsap==="execAsap"?0:100)}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"])};$.Isotope=function(options,element,callback){this.element=$(element);this._create(options);this._init(callback)};var isoContainerStyles=["width","height"];var $window=$(window);$.Isotope.settings={resizable:true,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:false,duration:800},sortBy:"original-order",sortAscending:true,resizesContainer:true,transformsEnabled:true,itemPositionDataEnabled:false};$.Isotope.prototype={_create:function(options){this.options=$.extend({},$.Isotope.settings,options);this.styleQueue=[];this.elemCount=0;var elemStyle=this.element[0].style;this.originalStyle={};var containerStyles=isoContainerStyles.slice(0);for(var prop in this.options.containerStyle){containerStyles.push(prop)}for(var i=0,len=containerStyles.length;i<len;i++){prop=containerStyles[i];this.originalStyle[prop]=elemStyle[prop]||""}this.element.css(this.options.containerStyle);this._updateAnimationEngine();this._updateUsingTransforms();var originalOrderSorter={"original-order":function($elem,instance){instance.elemCount++;return instance.elemCount},random:function(){return Math.random()}};this.options.getSortData=$.extend(this.options.getSortData,originalOrderSorter);this.reloadItems();this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var instance=this;setTimeout(function(){instance.element.addClass(instance.options.containerClass)},0);if(this.options.resizable){$window.bind("smartresize.isotope",function(){instance.resize()})}this.element.delegate("."+this.options.hiddenClass,"click",function(){return false})},_getAtoms:function($elems){var selector=this.options.itemSelector,$atoms=selector?$elems.filter(selector).add($elems.find(selector)):$elems,atomStyle={position:"absolute"};$atoms=$atoms.filter(function(i,atom){return atom.nodeType===1});if(this.usingTransforms){atomStyle.left=0;atomStyle.top=0}$atoms.css(atomStyle).addClass(this.options.itemClass);this.updateSortData($atoms,true);return $atoms},_init:function(callback){this.$filteredAtoms=this._filter(this.$allAtoms);this._sort();this.reLayout(callback)},option:function(opts){if($.isPlainObject(opts)){this.options=$.extend(true,this.options,opts);var updateOptionFn;for(var optionName in opts){updateOptionFn="_update"+capitalize(optionName);if(this[updateOptionFn]){this[updateOptionFn]()}}}},_updateAnimationEngine:function(){var animationEngine=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");var isUsingJQueryAnimation;switch(animationEngine){case"css":case"none":isUsingJQueryAnimation=false;break;case"jquery":isUsingJQueryAnimation=true;break;default:isUsingJQueryAnimation=!Modernizr.csstransitions}this.isUsingJQueryAnimation=isUsingJQueryAnimation;this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var usingTransforms=this.usingTransforms=this.options.transformsEnabled&&Modernizr.csstransforms&&Modernizr.csstransitions&&!this.isUsingJQueryAnimation;if(!usingTransforms){delete this.options.hiddenStyle.scale;delete this.options.visibleStyle.scale}this.getPositionStyles=usingTransforms?this._translate:this._positionAbs},_filter:function($atoms){var filter=this.options.filter===""?"*":this.options.filter;if(!filter){return $atoms}var hiddenClass=this.options.hiddenClass,hiddenSelector="."+hiddenClass,$hiddenAtoms=$atoms.filter(hiddenSelector),$atomsToShow=$hiddenAtoms;if(filter!=="*"){$atomsToShow=$hiddenAtoms.filter(filter);var $atomsToHide=$atoms.not(hiddenSelector).not(filter).addClass(hiddenClass);this.styleQueue.push({$el:$atomsToHide,style:this.options.hiddenStyle})}this.styleQueue.push({$el:$atomsToShow,style:this.options.visibleStyle});$atomsToShow.removeClass(hiddenClass);return $atoms.filter(filter)},updateSortData:function($atoms,isIncrementingElemCount){var instance=this,getSortData=this.options.getSortData,$this,sortData;$atoms.each(function(){$this=$(this);sortData={};for(var key in getSortData){if(!isIncrementingElemCount&&key==="original-order"){sortData[key]=$.data(this,"isotope-sort-data")[key]}else{sortData[key]=getSortData[key]($this,instance)}}$.data(this,"isotope-sort-data",sortData)})},_sort:function(){var sortBy=this.options.sortBy,getSorter=this._getSorter,sortDir=this.options.sortAscending?1:-1,sortFn=function(alpha,beta){var a=getSorter(alpha,sortBy),b=getSorter(beta,sortBy);if(a===b&&sortBy!=="original-order"){a=getSorter(alpha,"original-order");b=getSorter(beta,"original-order")}return(a>b?1:a<b?-1:0)*sortDir};this.$filteredAtoms.sort(sortFn)},_getSorter:function(elem,sortBy){return $.data(elem,"isotope-sort-data")[sortBy]},_translate:function(x,y){return{translate:[x,y]}},_positionAbs:function(x,y){return{left:x,top:y}},_pushPosition:function($elem,x,y){x=Math.round(x+this.offset.left);y=Math.round(y+this.offset.top);var position=this.getPositionStyles(x,y);this.styleQueue.push({$el:$elem,style:position});if(this.options.itemPositionDataEnabled){$elem.data("isotope-item-position",{x:x,y:y})}},layout:function($elems,callback){var layoutMode=this.options.layoutMode;this["_"+layoutMode+"Layout"]($elems);if(this.options.resizesContainer){var containerStyle=this["_"+layoutMode+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:containerStyle})}this._processStyleQueue($elems,callback);this.isLaidOut=true},_processStyleQueue:function($elems,callback){var styleFn=!this.isLaidOut?"css":this.isUsingJQueryAnimation?"animate":"css",animOpts=this.options.animationOptions,onLayout=this.options.onLayout,objStyleFn,processor,triggerCallbackNow,callbackFn;processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts)};if(this._isInserting&&this.isUsingJQueryAnimation){processor=function(i,obj){objStyleFn=obj.$el.hasClass("no-transition")?"css":styleFn;obj.$el[objStyleFn](obj.style,animOpts)}}else if(callback||onLayout||animOpts.complete){var isCallbackTriggered=false,callbacks=[callback,onLayout,animOpts.complete],instance=this;triggerCallbackNow=true;callbackFn=function(){if(isCallbackTriggered){return}var hollaback;for(var i=0,len=callbacks.length;i<len;i++){hollaback=callbacks[i];if(typeof hollaback==="function"){hollaback.call(instance.element,$elems,instance)}}isCallbackTriggered=true};if(this.isUsingJQueryAnimation&&styleFn==="animate"){animOpts.complete=callbackFn;triggerCallbackNow=false}else if(Modernizr.csstransitions){var i=0,firstItem=this.styleQueue[0],testElem=firstItem&&firstItem.$el,styleObj;while(!testElem||!testElem.length){styleObj=this.styleQueue[i++];if(!styleObj){return}testElem=styleObj.$el}var duration=parseFloat(getComputedStyle(testElem[0])[transitionDurProp]);if(duration>0){processor=function(i,obj){obj.$el[styleFn](obj.style,animOpts).one(transitionEndEvent,callbackFn)};triggerCallbackNow=false}}}$.each(this.styleQueue,processor);if(triggerCallbackNow){callbackFn()}this.styleQueue=[]},resize:function(){if(this["_"+this.options.layoutMode+"ResizeChanged"]()){this.reLayout()}},reLayout:function(callback){this["_"+this.options.layoutMode+"Reset"]();this.layout(this.$filteredAtoms,callback)},addItems:function($content,callback){var $newAtoms=this._getAtoms($content);this.$allAtoms=this.$allAtoms.add($newAtoms);if(callback){callback($newAtoms)}},insert:function($content,callback){this.element.append($content);var instance=this;this.addItems($content,function($newAtoms){var $newFilteredAtoms=instance._filter($newAtoms);instance._addHideAppended($newFilteredAtoms);instance._sort();instance.reLayout();instance._revealAppended($newFilteredAtoms,callback)})},appended:function($content,callback){var instance=this;this.addItems($content,function($newAtoms){instance._addHideAppended($newAtoms);instance.layout($newAtoms);instance._revealAppended($newAtoms,callback)})},_addHideAppended:function($newAtoms){this.$filteredAtoms=this.$filteredAtoms.add($newAtoms);$newAtoms.addClass("no-transition");this._isInserting=true;this.styleQueue.push({$el:$newAtoms,style:this.options.hiddenStyle})},_revealAppended:function($newAtoms,callback){var instance=this;setTimeout(function(){$newAtoms.removeClass("no-transition");instance.styleQueue.push({$el:$newAtoms,style:instance.options.visibleStyle});instance._isInserting=false;instance._processStyleQueue($newAtoms,callback)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function($content,callback){this.$allAtoms=this.$allAtoms.not($content);this.$filteredAtoms=this.$filteredAtoms.not($content);var instance=this;var removeContent=function(){$content.remove();if(callback){callback.call(instance.element)}};if($content.filter(":not(."+this.options.hiddenClass+")").length){this.styleQueue.push({$el:$content,style:this.options.hiddenStyle});this._sort();this.reLayout(removeContent)}else{removeContent()}},shuffle:function(callback){this.updateSortData(this.$allAtoms);this.options.sortBy="random";this._sort();this.reLayout(callback)},destroy:function(){var usingTransforms=this.usingTransforms;var options=this.options;this.$allAtoms.removeClass(options.hiddenClass+" "+options.itemClass).each(function(){var style=this.style;style.position="";style.top="";style.left="";style.opacity="";if(usingTransforms){style[transformProp]=""}});var elemStyle=this.element[0].style;for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop]}this.element.unbind(".isotope").undelegate("."+options.hiddenClass,"click").removeClass(options.containerClass).removeData("isotope");$window.unbind(".isotope")},_getSegments:function(isRows){var namespace=this.options.layoutMode,measure=isRows?"rowHeight":"columnWidth",size=isRows?"height":"width",segmentsName=isRows?"rows":"cols",containerSize=this.element[size](),segments,segmentSize=this.options[namespace]&&this.options[namespace][measure]||this.$filteredAtoms["outer"+capitalize(size)](true)||containerSize;
segments=Math.floor(containerSize/segmentSize);segments=Math.max(segments,1);this[namespace][segmentsName]=segments;this[namespace][measure]=segmentSize},_checkIfSegmentsChanged:function(isRows){var namespace=this.options.layoutMode,segmentsName=isRows?"rows":"cols",prevSegments=this[namespace][segmentsName];this._getSegments(isRows);return this[namespace][segmentsName]!==prevSegments},_masonryReset:function(){this.masonry={};this._getSegments();var i=this.masonry.cols;this.masonry.colYs=[];while(i--){this.masonry.colYs.push(0)}},_masonryLayout:function($elems){var instance=this,props=instance.masonry;$elems.each(function(){var $this=$(this),colSpan=Math.ceil($this.outerWidth(true)/props.columnWidth);colSpan=Math.min(colSpan,props.cols);if(colSpan===1){instance._masonryPlaceBrick($this,props.colYs)}else{var groupCount=props.cols+1-colSpan,groupY=[],groupColY,i;for(i=0;i<groupCount;i++){groupColY=props.colYs.slice(i,i+colSpan);groupY[i]=Math.max.apply(Math,groupColY)}instance._masonryPlaceBrick($this,groupY)}})},_masonryPlaceBrick:function($brick,setY){var minimumY=Math.min.apply(Math,setY),shortCol=0;for(var i=0,len=setY.length;i<len;i++){if(setY[i]===minimumY){shortCol=i;break}}var x=this.masonry.columnWidth*shortCol,y=minimumY;this._pushPosition($brick,x,y);var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.masonry.cols+1-len;for(i=0;i<setSpan;i++){this.masonry.colYs[shortCol+i]=setHeight}},_masonryGetContainerSize:function(){var containerHeight=Math.max.apply(Math,this.masonry.colYs);return{height:containerHeight}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function($elems){var instance=this,containerWidth=this.element.width(),props=this.fitRows;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.x!==0&&atomW+props.x>containerWidth){props.x=0;props.y=props.height}instance._pushPosition($this,props.x,props.y);props.height=Math.max(props.y+atomH,props.height);props.x+=atomW})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return true},_cellsByRowReset:function(){this.cellsByRow={index:0};this._getSegments();this._getSegments(true)},_cellsByRowLayout:function($elems){var instance=this,props=this.cellsByRow;$elems.each(function(){var $this=$(this),col=props.index%props.cols,row=Math.floor(props.index/props.cols),x=(col+.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,0,instance.straightDown.y);instance.straightDown.y+=$this.outerHeight(true)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return true},_masonryHorizontalReset:function(){this.masonryHorizontal={};this._getSegments(true);var i=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(i--){this.masonryHorizontal.rowXs.push(0)}},_masonryHorizontalLayout:function($elems){var instance=this,props=instance.masonryHorizontal;$elems.each(function(){var $this=$(this),rowSpan=Math.ceil($this.outerHeight(true)/props.rowHeight);rowSpan=Math.min(rowSpan,props.rows);if(rowSpan===1){instance._masonryHorizontalPlaceBrick($this,props.rowXs)}else{var groupCount=props.rows+1-rowSpan,groupX=[],groupRowX,i;for(i=0;i<groupCount;i++){groupRowX=props.rowXs.slice(i,i+rowSpan);groupX[i]=Math.max.apply(Math,groupRowX)}instance._masonryHorizontalPlaceBrick($this,groupX)}})},_masonryHorizontalPlaceBrick:function($brick,setX){var minimumX=Math.min.apply(Math,setX),smallRow=0;for(var i=0,len=setX.length;i<len;i++){if(setX[i]===minimumX){smallRow=i;break}}var x=minimumX,y=this.masonryHorizontal.rowHeight*smallRow;this._pushPosition($brick,x,y);var setWidth=minimumX+$brick.outerWidth(true),setSpan=this.masonryHorizontal.rows+1-len;for(i=0;i<setSpan;i++){this.masonryHorizontal.rowXs[smallRow+i]=setWidth}},_masonryHorizontalGetContainerSize:function(){var containerWidth=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:containerWidth}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function($elems){var instance=this,containerHeight=this.element.height(),props=this.fitColumns;$elems.each(function(){var $this=$(this),atomW=$this.outerWidth(true),atomH=$this.outerHeight(true);if(props.y!==0&&atomH+props.y>containerHeight){props.x=props.width;props.y=0}instance._pushPosition($this,props.x,props.y);props.width=Math.max(props.x+atomW,props.width);props.y+=atomH})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return true},_cellsByColumnReset:function(){this.cellsByColumn={index:0};this._getSegments();this._getSegments(true)},_cellsByColumnLayout:function($elems){var instance=this,props=this.cellsByColumn;$elems.each(function(){var $this=$(this),col=Math.floor(props.index/props.rows),row=props.index%props.rows,x=(col+.5)*props.columnWidth-$this.outerWidth(true)/2,y=(row+.5)*props.rowHeight-$this.outerHeight(true)/2;instance._pushPosition($this,x,y);props.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(true)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function($elems){var instance=this;$elems.each(function(i){var $this=$(this);instance._pushPosition($this,instance.straightAcross.x,0);instance.straightAcross.x+=$this.outerWidth(true)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return true}};$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find("img").add($this.filter("img")),len=$images.length,blank="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",loaded=[];function triggerCallback(){callback.call($this,$images)}function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind(".imagesLoaded",imgLoaded)}}}if(!len){triggerCallback()}$images.bind("load.imagesLoaded error.imagesLoaded",imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src});return $this};var logError=function(message){if(window.console){window.console.error(message)}};$.fn.isotope=function(options,callback){if(typeof options==="string"){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"isotope");if(!instance){logError("cannot call methods on isotope prior to initialization; "+"attempted to call method '"+options+"'");return}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for isotope instance");return}instance[options].apply(instance,args)})}else{this.each(function(){var instance=$.data(this,"isotope");if(instance){instance.option(options);instance._init(callback)}else{$.data(this,"isotope",new $.Isotope(options,this,callback))}})}return this}})(window,jQuery);(function($){$.fn.fastClick=function(handler){return $(this).each(function(){$.FastButton($(this)[0],handler)})};$.FastButton=function(element,handler){var startX,startY;var reset=function(){$(element).unbind("touchend");$("body").unbind("touchmove.fastClick")};var onClick=function(event){event.stopPropagation();reset();handler.call(this,event);if(event.type==="touchend"){$.clickbuster.preventGhostClick(startX,startY)}};var onTouchMove=function(event){if(Math.abs(event.originalEvent.touches[0].clientX-startX)>10||Math.abs(event.originalEvent.touches[0].clientY-startY)>10){reset()}};var onTouchStart=function(event){event.stopPropagation();$(element).bind("touchend",onClick);$("body").bind("touchmove.fastClick",onTouchMove);startX=event.originalEvent.touches[0].clientX;startY=event.originalEvent.touches[0].clientY};$(element).bind({touchstart:onTouchStart,click:onClick})};$.clickbuster={coordinates:[],preventGhostClick:function(x,y){$.clickbuster.coordinates.push(x,y);window.setTimeout($.clickbuster.pop,2500)},pop:function(){$.clickbuster.coordinates.splice(0,2)},onClick:function(event){var x,y,i;for(i=0;i<$.clickbuster.coordinates.length;i+=2){x=$.clickbuster.coordinates[i];y=$.clickbuster.coordinates[i+1];if(Math.abs(event.clientX-x)<25&&Math.abs(event.clientY-y)<25){event.stopPropagation();event.preventDefault()}}}};$(function(){if(document.addEventListener){document.addEventListener("click",$.clickbuster.onClick,true)}else if(document.attachEvent){document.attachEvent("onclick",$.clickbuster.onClick)}})})(jQuery);jQuery.easing["jswing"]=jQuery.easing["swing"];jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=1.525)+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}else{return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b}});(function($,undefined){var mouseEvents={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},gesturesSupport="ongesturestart"in document.createElement("div");function makeMouseEvent(event){var touch=event.originalEvent.changedTouches[0];return $.extend(event,{type:mouseEvents[event.type],which:1,pageX:touch.pageX,pageY:touch.pageY,screenX:touch.screenX,screenY:touch.screenY,clientX:touch.clientX,clientY:touch.clientY,isTouchEvent:true})}var mouseProto=$.ui.mouse.prototype,_mouseInit=$.ui.mouse.prototype._mouseInit;mouseProto._mouseInit=function(){var self=this;self._touchActive=false;this.element.bind("touchstart."+this.widgetName,function(event){if(gesturesSupport&&event.originalEvent.touches.length>1){return}self._touchActive=true;return self._mouseDown(makeMouseEvent(event))});var self=this;this._mouseMoveDelegate=function(event){if(gesturesSupport&&event.originalEvent.touches&&event.originalEvent.touches.length>1){return}if(self._touchActive){return self._mouseMove(makeMouseEvent(event))}};this._mouseUpDelegate=function(event){if(self._touchActive){self._touchActive=false;return self._mouseUp(makeMouseEvent(event))}};$(document).bind("touchmove."+this.widgetName,this._mouseMoveDelegate).bind("touchend."+this.widgetName,this._mouseUpDelegate);_mouseInit.apply(this)};var setter=function(setter,getter){return function(val){if(arguments.length===0){return getter.apply(this)}else{setter.apply(this,arguments)}}};var ieTransforms={0:{marginLeft:0,marginTop:0,filter:'progid:DXImageTransform.Microsoft.Matrix(M11=1, M12=0, M21=0, M22=1, SizingMethod="auto expand")'},90:{marginLeft:-1,marginTop:1,filter:'progid:DXImageTransform.Microsoft.Matrix(M11=0, M12=-1, M21=1, M22=0, SizingMethod="auto expand")'},180:{marginLeft:0,marginTop:0,filter:'progid:DXImageTransform.Microsoft.Matrix(M11=-1, M12=0, M21=0, M22=-1, SizingMethod="auto expand")'},270:{marginLeft:-1,marginTop:1,filter:'progid:DXImageTransform.Microsoft.Matrix(M11=0, M12=1, M21=-1, M22=0, SizingMethod="auto expand")'}},useIeTransforms=jQuery.browser.msie&&parseInt(jQuery.browser.version,10)<=8;$.widget("ui.iviewer",$.ui.mouse,{widgetEventPrefix:"iviewer",options:{zoom:"fit",zoom_base:100,zoom_max:800,zoom_min:25,zoom_delta:1.4,zoom_animation:true,ui_disabled:false,mousewheel:true,update_on_resize:true,onZoom:jQuery.noop,onAfterZoom:jQuery.noop,onStartDrag:jQuery.noop,onDrag:jQuery.noop,onStopDrag:jQuery.noop,onMouseMove:jQuery.noop,onClick:jQuery.noop,onStartLoad:null,onFinishLoad:null,onErrorLoad:null},_create:function(){var me=this;this.dx=0;this.dy=0;this.img_object={};this.zoom_object={};this._angle=0;this.current_zoom=this.options.zoom;if(this.options.src===null){return}this.container=this.element;this._updateContainerInfo();this.container.css("overflow","hidden");if(this.options.update_on_resize==true){$(window).resize(function(){me.update()})}this.img_object=new $.ui.iviewer.ImageObject(this.options.zoom_animation);if(this.options.mousewheel){this.img_object.object().mousewheel(function(ev,delta){var zoom=delta>0?1:-1,container_offset=me.container.offset(),mouse_pos={x:ev.pageX-container_offset.left,y:ev.pageY-container_offset.top};me.zoom_by(zoom,mouse_pos);return false});if(gesturesSupport){var gestureThrottle=+new Date;var originalScale,originalCenter;this.img_object.object().bind("touchstart",function(ev){originalScale=me.current_zoom;var touches=ev.originalEvent.touches,container_offset;if(touches.length==2){container_offset=me.container.offset();originalCenter={x:(touches[0].pageX+touches[1].pageX)/2-container_offset.left,y:(touches[0].pageY+touches[1].pageY)/2-container_offset.top}}else{originalCenter=null}}).bind("gesturechange",function(ev){var d=+new Date;if(d-gestureThrottle<50){return}gestureThrottle=d;var zoom=originalScale*ev.originalEvent.scale;me.set_zoom(zoom,originalCenter);ev.preventDefault()}).bind("gestureend",function(ev){originalCenter=null})}}this.img_object.object().click(function(e){return me._click(e)}).prependTo(this.container);this.container.bind("mousemove",function(ev){me._handleMouseMove(ev)});this.loadImage(this.options.src);if(!this.options.ui_disabled){this.createui()}this._mouseInit()},destroy:function(){$.Widget.prototype.destroy.call(this);this._mouseDestroy();this.img_object.object().remove()},_updateContainerInfo:function(){this.options.height=this.container.height();this.options.width=this.container.width()},update:function(){this._updateContainerInfo();this.setCoords(this.img_object.x(),this.img_object.y())},loadImage:function(src){this.current_zoom=this.options.zoom;var me=this;this._trigger("onStartLoad",0,src);this.container.addClass("iviewer_loading");this.img_object.load(src,function(){me._imageLoaded(src)},function(){me._trigger("onErrorLoad",0,src)})},_imageLoaded:function(src){this.container.removeClass("iviewer_loading");this.container.addClass("iviewer_cursor");if(this.options.zoom=="fit"){this.fit(true)}else{this.set_zoom(this.options.zoom,true)}this._trigger("onFinishLoad",0,src)},fit:function(skip_animation){var aspect_ratio=this.img_object.orig_width()/this.img_object.orig_height();var window_ratio=this.options.width/this.options.height;var choose_left=aspect_ratio>window_ratio;var new_zoom=0;if(choose_left){new_zoom=this.options.width/this.img_object.orig_width()*100}else{new_zoom=this.options.height/this.img_object.orig_height()*100}this.set_zoom(new_zoom,skip_animation)},center:function(){this.setCoords(-Math.round((this.img_object.display_width()-this.options.width)/2),-Math.round((this.img_object.display_height()-this.options.height)/2))},moveTo:function(x,y){var dx=x-Math.round(this.options.width/2);var dy=y-Math.round(this.options.height/2);var new_x=this.img_object.x()-dx;var new_y=this.img_object.y()-dy;this.setCoords(new_x,new_y)},getContainerOffset:function(){return jQuery.extend({},this.container.offset())},setCoords:function(x,y){if(!this.img_object.loaded()){return}var coords=this._correctCoords(x,y);this.img_object.x(coords.x);this.img_object.y(coords.y)},_correctCoords:function(x,y){x=parseInt(x,10);y=parseInt(y,10);if(y>0){y=0}if(x>0){x=0}if(y+this.img_object.display_height()<this.options.height){y=this.options.height-this.img_object.display_height()}if(x+this.img_object.display_width()<this.options.width){x=this.options.width-this.img_object.display_width()}if(this.img_object.display_width()<=this.options.width){x=-(this.img_object.display_width()-this.options.width)/2}if(this.img_object.display_height()<=this.options.height){y=-(this.img_object.display_height()-this.options.height)/2}return{x:x,y:y}},containerToImage:function(x,y){var coords={x:x-this.img_object.x(),y:y-this.img_object.y()};coords=this.img_object.toOriginalCoords(coords);return{x:util.descaleValue(coords.x,this.current_zoom),y:util.descaleValue(coords.y,this.current_zoom)}},imageToContainer:function(x,y){var coords={x:util.scaleValue(x,this.current_zoom),y:util.scaleValue(y,this.current_zoom)};return this.img_object.toRealCoords(coords)},_getMouseCoords:function(e){var containerOffset=this.container.offset();coords=this.containerToImage(e.pageX-containerOffset.left,e.pageY-containerOffset.top);return coords},set_zoom:function(new_zoom,skip_animation,zoom_center){if(this._trigger("onZoom",0,new_zoom)==false){return}if(!this.img_object.loaded()){return}zoom_center=zoom_center||{x:Math.round(this.options.width/2),y:Math.round(this.options.height/2)};if(new_zoom<this.options.zoom_min){new_zoom=this.options.zoom_min}else if(new_zoom>this.options.zoom_max){new_zoom=this.options.zoom_max}if(this.current_zoom=="fit"){var old_x=zoom_center.x+Math.round(this.img_object.orig_width()/2);var old_y=zoom_center.y+Math.round(this.img_object.orig_height()/2);this.current_zoom=100}else{var old_x=-this.img_object.x()+zoom_center.x;var old_y=-this.img_object.y()+zoom_center.y}var new_width=util.scaleValue(this.img_object.orig_width(),new_zoom);var new_height=util.scaleValue(this.img_object.orig_height(),new_zoom);var new_x=util.scaleValue(util.descaleValue(old_x,this.current_zoom),new_zoom);var new_y=util.scaleValue(util.descaleValue(old_y,this.current_zoom),new_zoom);new_x=zoom_center.x-new_x;new_y=zoom_center.y-new_y;new_width=Math.floor(new_width);new_height=Math.floor(new_height);new_x=Math.floor(new_x);new_y=Math.floor(new_y);this.img_object.display_width(new_width);this.img_object.display_height(new_height);var coords=this._correctCoords(new_x,new_y),self=this;this.img_object.setImageProps(new_width,new_height,coords.x,coords.y,skip_animation,function(){self._trigger("onAfterZoom",0,new_zoom)});this.current_zoom=new_zoom;this.update_status()},zoom_by:function(delta,zoom_center){var closest_rate=this.find_closest_zoom_rate(this.current_zoom);var next_rate=closest_rate+delta;var next_zoom=this.options.zoom_base*Math.pow(this.options.zoom_delta,next_rate);if(delta>0&&next_zoom<this.current_zoom){next_zoom*=this.options.zoom_delta}if(delta<0&&next_zoom>this.current_zoom){next_zoom/=this.options.zoom_delta}this.set_zoom(next_zoom,undefined,zoom_center)},angle:function(deg,abs){if(arguments.length===0){return this.img_object.angle()}if(deg<-270||deg>270||deg%90!==0){return}if(!abs){deg+=this.img_object.angle()}if(deg<0){deg+=360}if(deg>=360){deg-=360}if(deg===this.img_object.angle()){return}this.img_object.angle(deg);this.center();this._trigger("angle",0,{angle:this.img_object.angle()})},find_closest_zoom_rate:function(value){if(value==this.options.zoom_base){return 0}function div(val1,val2){return val1/val2}function mul(val1,val2){return val1*val2}var func=value>this.options.zoom_base?mul:div;var sgn=value>this.options.zoom_base?1:-1;var mltplr=this.options.zoom_delta;var rate=1;while(Math.abs(func(this.options.zoom_base,Math.pow(mltplr,rate))-value)>Math.abs(func(this.options.zoom_base,Math.pow(mltplr,rate+1))-value)){rate++}return sgn*rate},update_status:function(){if(!this.options.ui_disabled){var percent=Math.round(100*this.img_object.display_height()/this.img_object.orig_height());if(percent){this.zoom_object.html(percent+"%")}}},info:function(param,withoutRotation){if(!param){return}switch(param){case"orig_width":case"orig_height":if(withoutRotation){return this.img_object.angle()%180===0?this.img_object[param]():param==="orig_width"?this.img_object.orig_height():this.img_object.orig_width()}else{return this.img_object[param]()}case"display_width":case"display_height":case"angle":return this.img_object[param]();case"zoom":return this.current_zoom;case"src":return this.img_object.object().attr("src");case"coords":return{x:this.img_object.x(),y:this.img_object.y()}}},_mouseStart:function(e){$.ui.mouse.prototype._mouseStart.call(this,e);if(this._trigger("onStartDrag",0,this._getMouseCoords(e))===false){return false}this.container.addClass("iviewer_drag_cursor");this._dragInitialized=!(e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length==1);this.dx=e.pageX-this.img_object.x();this.dy=e.pageY-this.img_object.y();return true},_mouseCapture:function(e){return true},_handleMouseMove:function(e){this._trigger("onMouseMove",e,this._getMouseCoords(e))},_mouseDrag:function(e){$.ui.mouse.prototype._mouseDrag.call(this,e);if(!this._dragInitialized){this.dx=e.pageX-this.img_object.x();this.dy=e.pageY-this.img_object.y();this._dragInitialized=true}var ltop=e.pageY-this.dy;var lleft=e.pageX-this.dx;this.setCoords(lleft,ltop);this._trigger("onDrag",e,this._getMouseCoords(e));return false},_mouseStop:function(e){$.ui.mouse.prototype._mouseStop.call(this,e);this.container.removeClass("iviewer_drag_cursor");this._trigger("onStopDrag",0,this._getMouseCoords(e))},_click:function(e){this._trigger("onClick",0,this._getMouseCoords(e))},createui:function(){var me=this;$("<div>",{"class":"iviewer_zoom_in iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.zoom_by(1);return false}).appendTo(this.container);$("<div>",{"class":"iviewer_zoom_out iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.zoom_by(-1);return false}).appendTo(this.container);$("<div>",{"class":"iviewer_zoom_zero iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.set_zoom(100);return false}).appendTo(this.container);$("<div>",{"class":"iviewer_zoom_fit iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.fit(this);return false}).appendTo(this.container);this.zoom_object=$("<div>").addClass("iviewer_zoom_status iviewer_common").appendTo(this.container);$("<div>",{"class":"iviewer_rotate_left iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.angle(-90);return false}).appendTo(this.container);$("<div>",{"class":"iviewer_rotate_right iviewer_common iviewer_button"}).bind("mousedown touchstart",function(){me.angle(90);return false}).appendTo(this.container);this.update_status()}});$.ui.iviewer.ImageObject=function(do_anim){this._img=$("<img>").css({position:"absolute",top:"0px",left:"0px"});this._loaded=false;this._swapDimensions=false;this._do_anim=do_anim||false;this.x(0,true);this.y(0,true);this.angle(0)};(function(){this._reset=function(w,h){this._angle=0;this._swapDimensions=false;this.x(0);this.y(0);this.orig_width(w);this.orig_height(h);this.display_width(w);this.display_height(h)};this.loaded=function(){return this._loaded};this.load=function(src,loaded,error){var self=this;loaded=loaded||jQuery.noop;this._loaded=false;var img=new Image;img.onload=function(){self._loaded=true;self._reset(this.width,this.height);self._img.removeAttr("width").removeAttr("height").removeAttr("style").css({position:"absolute",top:"0px",left:"0px",maxWidth:"none"});self._img[0].src=src;loaded()};img.onerror=error;img.src=src;this.angle(0)};this._dimension=function(prefix,name){var horiz="_"+prefix+"_"+name,vert="_"+prefix+"_"+(name==="height"?"width":"height");return setter(function(val){this[this._swapDimensions?horiz:vert]=val},function(){return this[this._swapDimensions?horiz:vert]})};this.display_width=this._dimension("display","width"),this.display_height=this._dimension("display","height"),this.display_diff=function(){return Math.floor(this.display_width()-this.display_height())};this.orig_width=this._dimension("orig","width"),this.orig_height=this._dimension("orig","height"),this.x=setter(function(val,skipCss){this._x=val;if(!skipCss){this._finishAnimation();this._img.css("left",this._x+(this._swapDimensions?this.display_diff()/2:0)+"px")}},function(){return this._x});this.y=setter(function(val,skipCss){this._y=val;if(!skipCss){this._finishAnimation();this._img.css("top",this._y-(this._swapDimensions?this.display_diff()/2:0)+"px")}},function(){return this._y});this.angle=setter(function(deg){var prevSwap=this._swapDimensions;this._angle=deg;this._swapDimensions=deg%180!==0;if(prevSwap!==this._swapDimensions){var verticalMod=this._swapDimensions?-1:1;this.x(this.x()-verticalMod*this.display_diff()/2,true);this.y(this.y()+verticalMod*this.display_diff()/2,true)}var cssVal="rotate("+deg+"deg)",img=this._img;jQuery.each(["","-webkit-","-moz-","-o-","-ms-"],function(i,prefix){img.css(prefix+"transform",cssVal)});if(useIeTransforms){jQuery.each(["-ms-",""],function(i,prefix){img.css(prefix+"filter",ieTransforms[deg].filter)});img.css({marginLeft:ieTransforms[deg].marginLeft*this.display_diff()/2,marginTop:ieTransforms[deg].marginTop*this.display_diff()/2})}},function(){return this._angle});this.toOriginalCoords=function(point){switch(this.angle()){case 0:return{x:point.x,y:point.y};case 90:return{x:point.y,y:this.display_width()-point.x};case 180:return{x:this.display_width()-point.x,y:this.display_height()-point.y};case 270:return{x:this.display_height()-point.y,y:point.x}}};this.toRealCoords=function(point){switch(this.angle()){case 0:return{x:this.x()+point.x,y:this.y()+point.y};case 90:return{x:this.x()+this.display_width()-point.y,y:this.y()+point.x};case 180:return{x:this.x()+this.display_width()-point.x,y:this.y()+this.display_height()-point.y};case 270:return{x:this.x()+point.y,y:this.y()+this.display_height()-point.x}}};this.object=setter(jQuery.noop,function(){return this._img});this.setImageProps=function(disp_w,disp_h,x,y,skip_animation,complete){complete=complete||jQuery.noop;this.display_width(disp_w);this.display_height(disp_h);this.x(x,true);this.y(y,true);var w=this._swapDimensions?disp_h:disp_w;var h=this._swapDimensions?disp_w:disp_h;var params={width:w,height:h,top:y-(this._swapDimensions?this.display_diff()/2:0)+"px",left:x+(this._swapDimensions?this.display_diff()/2:0)+"px"};if(useIeTransforms){jQuery.extend(params,{marginLeft:ieTransforms[this.angle()].marginLeft*this.display_diff()/2,marginTop:ieTransforms[this.angle()].marginTop*this.display_diff()/2})}var swapDims=this._swapDimensions,img=this._img;if(useIeTransforms&&swapDims){var ieh=this._img.width(),iew=this._img.height(),iedh=params.height-ieh;iedw=params.width-iew;delete params.width;delete params.height}if(this._do_anim&&!skip_animation){this._img.stop(true).animate(params,{duration:200,complete:complete,step:function(now,fx){if(useIeTransforms&&swapDims&&fx.prop==="top"){var percent=(now-fx.start)/(fx.end-fx.start);img.height(ieh+iedh*percent);img.width(iew+iedw*percent);img.css("top",now)}}})}else{this._img.css(params);setTimeout(complete,0)}};this._finishAnimation=function(){this._img.stop(true,true)}}).apply($.ui.iviewer.ImageObject.prototype);var util={scaleValue:function(value,toZoom){return value*toZoom/100},descaleValue:function(value,fromZoom){return value*100/fromZoom}}})(jQuery,undefined);(function($){$.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var div=document.createElement("div");var support={};function getVendorPropertyName(prop){if(prop in div.style)return prop;var prefixes=["Moz","Webkit","O","ms"];var prop_=prop.charAt(0).toUpperCase()+prop.substr(1);if(prop in div.style){return prop}for(var i=0;i<prefixes.length;++i){var vendorProp=prefixes[i]+prop_;if(vendorProp in div.style){return vendorProp}}}function checkTransform3dSupport(){div.style[support.transform]="";div.style[support.transform]="rotateY(90deg)";return div.style[support.transform]!==""}var isChrome=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;support.transition=getVendorPropertyName("transition");support.transitionDelay=getVendorPropertyName("transitionDelay");support.transform=getVendorPropertyName("transform");support.transformOrigin=getVendorPropertyName("transformOrigin");support.transform3d=checkTransform3dSupport();var eventNames={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var transitionEnd=support.transitionEnd=eventNames[support.transition]||null;for(var key in support){if(support.hasOwnProperty(key)&&typeof $.support[key]==="undefined"){$.support[key]=support[key]}}div=null;$.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};
$.cssHooks["transit:transform"]={get:function(elem){return $(elem).data("transform")||new Transform},set:function(elem,v){var value=v;if(!(value instanceof Transform)){value=new Transform(value)}if(support.transform==="WebkitTransform"&&!isChrome){elem.style[support.transform]=value.toString(true)}else{elem.style[support.transform]=value.toString()}$(elem).data("transform",value)}};$.cssHooks.transform={set:$.cssHooks["transit:transform"].set};if($.fn.jquery<"1.8"){$.cssHooks.transformOrigin={get:function(elem){return elem.style[support.transformOrigin]},set:function(elem,value){elem.style[support.transformOrigin]=value}};$.cssHooks.transition={get:function(elem){return elem.style[support.transition]},set:function(elem,value){elem.style[support.transition]=value}}}registerCssHook("scale");registerCssHook("translate");registerCssHook("rotate");registerCssHook("rotateX");registerCssHook("rotateY");registerCssHook("rotate3d");registerCssHook("perspective");registerCssHook("skewX");registerCssHook("skewY");registerCssHook("x",true);registerCssHook("y",true);function Transform(str){if(typeof str==="string"){this.parse(str)}return this}Transform.prototype={setFromString:function(prop,val){var args=typeof val==="string"?val.split(","):val.constructor===Array?val:[val];args.unshift(prop);Transform.prototype.set.apply(this,args)},set:function(prop){var args=Array.prototype.slice.apply(arguments,[1]);if(this.setter[prop]){this.setter[prop].apply(this,args)}else{this[prop]=args.join(",")}},get:function(prop){if(this.getter[prop]){return this.getter[prop].apply(this)}else{return this[prop]||0}},setter:{rotate:function(theta){this.rotate=unit(theta,"deg")},rotateX:function(theta){this.rotateX=unit(theta,"deg")},rotateY:function(theta){this.rotateY=unit(theta,"deg")},scale:function(x,y){if(y===undefined){y=x}this.scale=x+","+y},skewX:function(x){this.skewX=unit(x,"deg")},skewY:function(y){this.skewY=unit(y,"deg")},perspective:function(dist){this.perspective=unit(dist,"px")},x:function(x){this.set("translate",x,null)},y:function(y){this.set("translate",null,y)},translate:function(x,y){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(x!==null&&x!==undefined){this._translateX=unit(x,"px")}if(y!==null&&y!==undefined){this._translateY=unit(y,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var s=(this.scale||"1,1").split(",");if(s[0]){s[0]=parseFloat(s[0])}if(s[1]){s[1]=parseFloat(s[1])}return s[0]===s[1]?s[0]:s},rotate3d:function(){var s=(this.rotate3d||"0,0,0,0deg").split(",");for(var i=0;i<=3;++i){if(s[i]){s[i]=parseFloat(s[i])}}if(s[3]){s[3]=unit(s[3],"deg")}return s}},parse:function(str){var self=this;str.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(x,prop,val){self.setFromString(prop,val)})},toString:function(use3d){var re=[];for(var i in this){if(this.hasOwnProperty(i)){if(!support.transform3d&&(i==="rotateX"||i==="rotateY"||i==="perspective"||i==="transformOrigin")){continue}if(i[0]!=="_"){if(use3d&&i==="scale"){re.push(i+"3d("+this[i]+",1)")}else if(use3d&&i==="translate"){re.push(i+"3d("+this[i]+",0)")}else{re.push(i+"("+this[i]+")")}}}}return re.join(" ")}};function callOrQueue(self,queue,fn){if(queue===true){self.queue(fn)}else if(queue){self.queue(queue,fn)}else{fn()}}function getProperties(props){var re=[];$.each(props,function(key){key=$.camelCase(key);key=$.transit.propertyMap[key]||$.cssProps[key]||key;key=uncamel(key);if($.inArray(key,re)===-1){re.push(key)}});return re}function getTransition(properties,duration,easing,delay){var props=getProperties(properties);if($.cssEase[easing]){easing=$.cssEase[easing]}var attribs=""+toMS(duration)+" "+easing;if(parseInt(delay,10)>0){attribs+=" "+toMS(delay)}var transitions=[];$.each(props,function(i,name){transitions.push(name+" "+attribs)});return transitions.join(", ")}$.fn.transition=$.fn.transit=function(properties,duration,easing,callback){var self=this;var delay=0;var queue=true;if(typeof duration==="function"){callback=duration;duration=undefined}if(typeof easing==="function"){callback=easing;easing=undefined}if(typeof properties.easing!=="undefined"){easing=properties.easing;delete properties.easing}if(typeof properties.duration!=="undefined"){duration=properties.duration;delete properties.duration}if(typeof properties.complete!=="undefined"){callback=properties.complete;delete properties.complete}if(typeof properties.queue!=="undefined"){queue=properties.queue;delete properties.queue}if(typeof properties.delay!=="undefined"){delay=properties.delay;delete properties.delay}if(typeof duration==="undefined"){duration=$.fx.speeds._default}if(typeof easing==="undefined"){easing=$.cssEase._default}duration=toMS(duration);var transitionValue=getTransition(properties,duration,easing,delay);var work=$.transit.enabled&&support.transition;var i=work?parseInt(duration,10)+parseInt(delay,10):0;if(i===0){var fn=function(next){self.css(properties);if(callback){callback.apply(self)}if(next){next()}};callOrQueue(self,queue,fn);return self}var oldTransitions={};var run=function(nextCall){var bound=false;var cb=function(){if(bound){self.unbind(transitionEnd,cb)}if(i>0){self.each(function(){this.style[support.transition]=oldTransitions[this]||null})}if(typeof callback==="function"){callback.apply(self)}if(typeof nextCall==="function"){nextCall()}};if(i>0&&transitionEnd&&$.transit.useTransitionEnd){bound=true;self.bind(transitionEnd,cb)}else{window.setTimeout(cb,i)}self.each(function(){if(i>0){this.style[support.transition]=transitionValue}$(this).css(properties)})};var deferredRun=function(next){this.offsetWidth;run(next)};callOrQueue(self,queue,deferredRun);return this};function registerCssHook(prop,isPixels){if(!isPixels){$.cssNumber[prop]=true}$.transit.propertyMap[prop]=support.transform;$.cssHooks[prop]={get:function(elem){var t=$(elem).css("transit:transform");return t.get(prop)},set:function(elem,value){var t=$(elem).css("transit:transform");t.setFromString(prop,value);$(elem).css({"transit:transform":t})}}}function uncamel(str){return str.replace(/([A-Z])/g,function(letter){return"-"+letter.toLowerCase()})}function unit(i,units){if(typeof i==="string"&&!i.match(/^[\-0-9\.]+$/)){return i}else{return""+i+units}}function toMS(duration){var i=duration;if($.fx.speeds[i]){i=$.fx.speeds[i]}return unit(i,"ms")}$.transit.getTransitionValue=getTransition})(jQuery);(function($){"use strict";$.fn.fitVids=function(options){var settings={customSelector:null};var div=document.createElement("div"),ref=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];div.className="fit-vids-style";div.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>";ref.parentNode.insertBefore(div,ref);if(options){$.extend(settings,options)}return this.each(function(){var selectors=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.youtube-nocookie.com']","iframe[src*='www.kickstarter.com']","object","embed"];if(settings.customSelector){selectors.push(settings.customSelector)}var $allVideos=$(this).find(selectors.join(","));$allVideos.each(function(){var $this=$(this);if(this.tagName.toLowerCase()==="embed"&&$this.parent("object").length||$this.parent(".fluid-width-video-wrapper").length){return}var height=this.tagName.toLowerCase()==="object"||$this.attr("height")&&!isNaN(parseInt($this.attr("height"),10))?parseInt($this.attr("height"),10):$this.height(),width=!isNaN(parseInt($this.attr("width"),10))?parseInt($this.attr("width"),10):$this.width(),aspectRatio=height/width;if(!$this.attr("id")){var videoID="fitvid"+Math.floor(Math.random()*999999);$this.attr("id",videoID)}$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",aspectRatio*100+"%");$this.removeAttr("height").removeAttr("width")})})}})(jQuery);(function($){var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings)};$scrollTo.defaults={axis:"xy",duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};$scrollTo.window=function(scope){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!isWin)return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return/webkit/i.test(navigator.userAgent)||doc.compatMode=="BackCompat"?doc.body:doc.documentElement})};$.fn.scrollTo=function(target,duration,settings){if(typeof duration=="object"){settings=duration;duration=0}if(typeof settings=="function")settings={onAfter:settings};if(target=="max")target=9e9;settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue)duration/=2;settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){if(target==null)return;var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is("html,body");switch(typeof targ){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case"object":if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(settings.axis.split(""),function(i,axis){var Pos=axis=="x"?"Left":"Top",pos=Pos.toLowerCase(),key="scroll"+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css("margin"+Pos))||0;attr[key]-=parseInt(targ.css("border"+Pos+"Width"))||0}attr[key]+=settings.offset[pos]||0;if(settings.over[pos])attr[key]+=targ[axis=="x"?"width":"height"]()*settings.over[pos]}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)=="%"?parseFloat(val)/100*max:val}if(settings.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&settings.queue){if(old!=attr[key])animate(settings.onAfterFirst);delete attr[key]}});animate(settings.onAfter);function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings)})}}).end()};$scrollTo.max=function(elem,axis){var Dim=axis=="x"?"Width":"Height",scroll="scroll"+Dim;if(!$(elem).is("html,body"))return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size="client"+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size])};function both(val){return typeof val=="object"?val:{top:val,left:val}}})(jQuery);window.matchMedia=window.matchMedia||function(doc,undefined){"use strict";var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>';docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q}}}(document);(function(win){"use strict";var respond={};win.respond=respond;respond.update=function(){};respond.mediaQueriesSupported=win.matchMedia&&win.matchMedia("only all").matches;if(respond.mediaQueriesSupported){return}var doc=win.document,docElem=doc.documentElement,mediastyles=[],rules=[],appendedEls=[],parsedSheets={},resizeThrottle=30,head=doc.getElementsByTagName("head")[0]||docElem,base=doc.getElementsByTagName("base")[0],links=head.getElementsByTagName("link"),requestQueue=[],ripCSS=function(){for(var i=0;i<links.length;i++){var sheet=links[i],href=sheet.href,media=sheet.media,isCSS=sheet.rel&&sheet.rel.toLowerCase()==="stylesheet";if(!!href&&isCSS&&!parsedSheets[href]){if(sheet.styleSheet&&sheet.styleSheet.rawCssText){translate(sheet.styleSheet.rawCssText,href,media);parsedSheets[href]=true}else{if(!/^([a-zA-Z:]*\/\/)/.test(href)&&!base||href.replace(RegExp.$1,"").split("/")[0]===win.location.host){requestQueue.push({href:href,media:media})}}}}makeRequests()},makeRequests=function(){if(requestQueue.length){var thisRequest=requestQueue.shift();ajax(thisRequest.href,function(styles){translate(styles,thisRequest.href,thisRequest.media);parsedSheets[thisRequest.href]=true;setTimeout(function(){makeRequests()},0)})}},translate=function(styles,href,media){var qs=styles.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),ql=qs&&qs.length||0;href=href.substring(0,href.lastIndexOf("/"));var repUrls=function(css){return css.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+href+"$2$3")},useMedia=!ql&&media;if(href.length){href+="/"}if(useMedia){ql=1}for(var i=0;i<ql;i++){var fullq,thisq,eachq,eql;if(useMedia){fullq=media;rules.push(repUrls(styles))}else{fullq=qs[i].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1;rules.push(RegExp.$2&&repUrls(RegExp.$2))}eachq=fullq.split(",");eql=eachq.length;for(var j=0;j<eql;j++){thisq=eachq[j];mediastyles.push({media:thisq.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:rules.length-1,hasquery:thisq.indexOf("(")>-1,minw:thisq.match(/\(min\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:thisq.match(/\(max\-width:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}}applyMedia()},lastCall,resizeDefer,getEmValue=function(){var ret,div=doc.createElement("div"),body=doc.body,fakeUsed=false;div.style.cssText="position:absolute;font-size:1em;width:1em";if(!body){body=fakeUsed=doc.createElement("body");body.style.background="none"}body.appendChild(div);docElem.insertBefore(body,docElem.firstChild);ret=div.offsetWidth;if(fakeUsed){docElem.removeChild(body)}else{body.removeChild(div)}ret=eminpx=parseFloat(ret);return ret},eminpx,applyMedia=function(fromResize){var name="clientWidth",docElemProp=docElem[name],currWidth=doc.compatMode==="CSS1Compat"&&docElemProp||doc.body[name]||docElemProp,styleBlocks={},lastLink=links[links.length-1],now=(new Date).getTime();if(fromResize&&lastCall&&now-lastCall<resizeThrottle){clearTimeout(resizeDefer);resizeDefer=setTimeout(applyMedia,resizeThrottle);return}else{lastCall=now}for(var i in mediastyles){if(mediastyles.hasOwnProperty(i)){var thisstyle=mediastyles[i],min=thisstyle.minw,max=thisstyle.maxw,minnull=min===null,maxnull=max===null,em="em";if(!!min){min=parseFloat(min)*(min.indexOf(em)>-1?eminpx||getEmValue():1)}if(!!max){max=parseFloat(max)*(max.indexOf(em)>-1?eminpx||getEmValue():1)}if(!thisstyle.hasquery||(!minnull||!maxnull)&&(minnull||currWidth>=min)&&(maxnull||currWidth<=max)){if(!styleBlocks[thisstyle.media]){styleBlocks[thisstyle.media]=[]}styleBlocks[thisstyle.media].push(rules[thisstyle.rules])}}}for(var j in appendedEls){if(appendedEls.hasOwnProperty(j)){if(appendedEls[j]&&appendedEls[j].parentNode===head){head.removeChild(appendedEls[j])}}}for(var k in styleBlocks){if(styleBlocks.hasOwnProperty(k)){var ss=doc.createElement("style"),css=styleBlocks[k].join("\n");ss.type="text/css";ss.media=k;head.insertBefore(ss,lastLink.nextSibling);if(ss.styleSheet){ss.styleSheet.cssText=css}else{ss.appendChild(doc.createTextNode(css))}appendedEls.push(ss)}}},ajax=function(url,callback){var req=xmlHttp();if(!req){return}req.open("GET",url,true);req.onreadystatechange=function(){if(req.readyState!==4||req.status!==200&&req.status!==304){return}callback(req.responseText)};if(req.readyState===4){return}req.send(null)},xmlHttp=function(){var xmlhttpmethod=false;try{xmlhttpmethod=new win.XMLHttpRequest}catch(e){xmlhttpmethod=new win.ActiveXObject("Microsoft.XMLHTTP")}return function(){return xmlhttpmethod}}();ripCSS();respond.update=ripCSS;function callMedia(){applyMedia(true)}if(win.addEventListener){win.addEventListener("resize",callMedia,false)}else if(win.attachEvent){win.attachEvent("onresize",callMedia)}})(this);window.enquire=function(matchMedia){"use strict";function each(collection,fn){var i=0,length=collection.length,cont;for(i;i<length;i++){cont=fn(collection[i],i);if(cont===false){break}}}function isArray(target){return Object.prototype.toString.apply(target)==="[object Array]"}function isFunction(target){return typeof target==="function"}function QueryHandler(options){this.initialised=false;this.options=options;if(!options.deferSetup){this.setup()}}QueryHandler.prototype={setup:function(e){if(this.options.setup){this.options.setup(e)}this.initialised=true},on:function(e){if(!this.initialised){this.setup(e)}this.options.match(e)},off:function(e){if(this.options.unmatch){this.options.unmatch(e)}},destroy:function(){if(this.options.destroy){this.options.destroy()}else{this.off()}},equals:function(target){return this.options===target||this.options.match===target}};function MediaQuery(query,isUnconditional){this.query=query;this.isUnconditional=isUnconditional;this.handlers=[];this.matched=false}MediaQuery.prototype={matchMedia:function(){return matchMedia(this.query).matches},addHandler:function(handler,turnOn){var qh=new QueryHandler(handler);this.handlers.push(qh);turnOn&&this.matched&&qh.on()},removeHandler:function(handler){var handlers=this.handlers;each(handlers,function(h,i){if(h.equals(handler)){h.destroy();return!handlers.splice(i,1)}})},assess:function(e){if(this.matchMedia()||this.isUnconditional){this.match(e)}else{this.unmatch(e)}},match:function(e){if(this.matched){return}each(this.handlers,function(handler){handler.on(e)});this.matched=true},unmatch:function(e){if(!this.matched){return}each(this.handlers,function(handler){handler.off(e)});this.matched=false}};function MediaQueryDispatch(){if(!matchMedia){throw new Error("matchMedia is required")}var capabilityTest=new MediaQuery("only all");this.queries={};this.listening=false;this.browserIsIncapable=!capabilityTest.matchMedia()}MediaQueryDispatch.prototype={register:function(q,options,shouldDegrade){var queries=this.queries,isUnconditional=shouldDegrade&&this.browserIsIncapable,listening=this.listening;if(!queries.hasOwnProperty(q)){queries[q]=new MediaQuery(q,isUnconditional);this.listening&&queries[q].assess()}if(isFunction(options)){options={match:options}}if(!isArray(options)){options=[options]}each(options,function(handler){queries[q].addHandler(handler,listening)});return this},unregister:function(q,handler){var queries=this.queries;if(!queries.hasOwnProperty(q)){return this}if(!handler){each(this.queries[q].handlers,function(handler){handler.destroy()});delete queries[q]}else{queries[q].removeHandler(handler)}return this},fire:function(e){var queries=this.queries,mediaQuery;for(mediaQuery in queries){if(queries.hasOwnProperty(mediaQuery)){queries[mediaQuery].assess(e)}}return this},listen:function(timeout){var self=this;timeout=timeout||500;if(!window.addEventListener){return}if(this.listening){return this}function wireFire(event){var timer;window.addEventListener(event,function(e){timer&&clearTimeout(timer);timer=setTimeout(function(){self.fire(e)},timeout)})}self.fire();wireFire("resize");wireFire("orientationChange");this.listening=true;return this}};return new MediaQueryDispatch}(window.matchMedia);(function($){$.flexslider=function(el,options){var slider=$(el),vars=$.extend({},$.flexslider.defaults,options),namespace=vars.namespace,touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,eventType=touch?"touchend":"click",vertical=vars.direction==="vertical",reverse=vars.reverse,carousel=vars.itemWidth>0,fade=vars.animation==="fade",asNav=vars.asNavFor!=="",methods={};$.data(el,"flexslider",slider);methods={init:function(){slider.animating=false;slider.currentSlide=vars.startAt;slider.animatingTo=slider.currentSlide;slider.atEnd=slider.currentSlide===0||slider.currentSlide===slider.last;slider.containerSelector=vars.selector.substr(0,vars.selector.search(" "));slider.slides=$(vars.selector,slider);slider.container=$(slider.containerSelector,slider);slider.count=slider.slides.length;slider.syncExists=$(vars.sync).length>0;if(vars.animation==="slide")vars.animation="swing";slider.prop=vertical?"top":"marginLeft";slider.args={};slider.manualPause=false;slider.transitions=!vars.video&&!fade&&vars.useCSS&&function(){var obj=document.createElement("div"),props=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props){if(obj.style[props[i]]!==undefined){slider.pfx=props[i].replace("Perspective","").toLowerCase();slider.prop="-"+slider.pfx+"-transform";return true}}return false}();if(vars.controlsContainer!=="")slider.controlsContainer=$(vars.controlsContainer).length>0&&$(vars.controlsContainer);if(vars.manualControls!=="")slider.manualControls=$(vars.manualControls).length>0&&$(vars.manualControls);if(vars.randomize){slider.slides.sort(function(){return Math.round(Math.random())-.5});slider.container.empty().append(slider.slides)}slider.doMath();if(asNav)methods.asNav.setup();slider.setup("init");if(vars.controlNav)methods.controlNav.setup();if(vars.directionNav)methods.directionNav.setup();if(vars.keyboard&&($(slider.containerSelector).length===1||vars.multipleKeyboard)){$(document).bind("keyup",function(event){var keycode=event.keyCode;if(!slider.animating&&(keycode===39||keycode===37)){var target=keycode===39?slider.getTarget("next"):keycode===37?slider.getTarget("prev"):false;slider.flexAnimate(target,vars.pauseOnAction)}})}if(vars.mousewheel){slider.bind("mousewheel",function(event,delta,deltaX,deltaY){event.preventDefault();var target=delta<0?slider.getTarget("next"):slider.getTarget("prev");slider.flexAnimate(target,vars.pauseOnAction)})}if(vars.pausePlay)methods.pausePlay.setup();if(vars.slideshow){if(vars.pauseOnHover){slider.hover(function(){if(!slider.manualPlay&&!slider.manualPause)slider.pause()},function(){if(!slider.manualPause&&!slider.manualPlay)slider.play()})}vars.initDelay>0?setTimeout(slider.play,vars.initDelay):slider.play()}if(touch&&vars.touch)methods.touch();if(!fade||fade&&vars.smoothHeight)$(window).bind("resize focus",methods.resize);setTimeout(function(){vars.start(slider)},200)},asNav:{setup:function(){slider.asNav=true;slider.animatingTo=Math.floor(slider.currentSlide/slider.move);slider.currentItem=slider.currentSlide;slider.slides.removeClass(namespace+"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide");slider.slides.click(function(e){e.preventDefault();var $slide=$(this),target=$slide.index();if(!$(vars.asNavFor).data("flexslider").animating&&!$slide.hasClass("active")){slider.direction=slider.currentItem<target?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!slider.manualControls){methods.controlNav.setupPaging()}else{methods.controlNav.setupManual()}},setupPaging:function(){var type=vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",j=1,item;slider.controlNavScaffold=$('<ol class="'+namespace+"control-nav "+namespace+type+'"></ol>');if(slider.pagingCount>1){for(var i=0;i<slider.pagingCount;i++){item=vars.controlNav==="thumbnails"?'<img src="'+slider.slides.eq(i).attr("data-thumb")+'"/>':"<a>"+j+"</a>";slider.controlNavScaffold.append("<li>"+item+"</li>");j++}}slider.controlsContainer?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append(slider.controlNavScaffold);methods.controlNav.set();methods.controlNav.active();slider.controlNavScaffold.delegate("a, img",eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+"active")){slider.direction=target>slider.currentSlide?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction)}});if(touch){slider.controlNavScaffold.delegate("a","click touchstart",function(event){event.preventDefault()})}},setupManual:function(){slider.controlNav=slider.manualControls;methods.controlNav.active();slider.controlNav.live(eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+"active")){target>slider.currentSlide?slider.direction="next":slider.direction="prev";slider.flexAnimate(target,vars.pauseOnAction)}});if(touch){slider.controlNav.live("click touchstart",function(event){event.preventDefault()})}},set:function(){var selector=vars.controlNav==="thumbnails"?"img":"a";slider.controlNav=$("."+namespace+"control-nav li "+selector,slider.controlsContainer?slider.controlsContainer:slider)},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active")},update:function(action,pos){if(slider.pagingCount>1&&action==="add"){slider.controlNavScaffold.append($("<li><a>"+slider.count+"</a></li>"))}else if(slider.pagingCount===1){slider.controlNavScaffold.find("li").remove()}else{slider.controlNav.eq(pos).closest("li").remove()}methods.controlNav.set();slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length?slider.update(pos,action):methods.controlNav.active()}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav"><li><a class="'+namespace+'prev" href="#">'+vars.prevText+'</a></li><li><a class="'+namespace+'next" href="#">'+vars.nextText+"</a></li></ul>");if(slider.controlsContainer){$(slider.controlsContainer).append(directionNavScaffold);slider.directionNav=$("."+namespace+"direction-nav li a",slider.controlsContainer)}else{slider.append(directionNavScaffold);slider.directionNav=$("."+namespace+"direction-nav li a",slider)}methods.directionNav.update();slider.directionNav.bind(eventType,function(event){event.preventDefault();var target=$(this).hasClass(namespace+"next")?slider.getTarget("next"):slider.getTarget("prev");slider.flexAnimate(target,vars.pauseOnAction)});if(touch){slider.directionNav.bind("click touchstart",function(event){event.preventDefault()})}},update:function(){var disabledClass=namespace+"disabled";if(slider.pagingCount===1){slider.directionNav.addClass(disabledClass)}else if(!vars.animationLoop){if(slider.animatingTo===0){slider.directionNav.removeClass(disabledClass).filter("."+namespace+"prev").addClass(disabledClass)}else if(slider.animatingTo===slider.last){slider.directionNav.removeClass(disabledClass).filter("."+namespace+"next").addClass(disabledClass)}else{slider.directionNav.removeClass(disabledClass)}}else{slider.directionNav.removeClass(disabledClass)}}},pausePlay:{setup:function(){var pausePlayScaffold=$('<div class="'+namespace+'pauseplay"><a></a></div>');if(slider.controlsContainer){slider.controlsContainer.append(pausePlayScaffold);slider.pausePlay=$("."+namespace+"pauseplay a",slider.controlsContainer)}else{slider.append(pausePlayScaffold);slider.pausePlay=$("."+namespace+"pauseplay a",slider)}methods.pausePlay.update(vars.slideshow?namespace+"pause":namespace+"play");slider.pausePlay.bind(eventType,function(event){event.preventDefault();if($(this).hasClass(namespace+"pause")){slider.manualPause=true;slider.manualPlay=false;slider.pause()}else{slider.manualPause=false;slider.manualPlay=true;slider.play()}});if(touch){slider.pausePlay.bind("click touchstart",function(event){event.preventDefault()})}},update:function(state){state==="play"?slider.pausePlay.removeClass(namespace+"pause").addClass(namespace+"play").text(vars.playText):slider.pausePlay.removeClass(namespace+"play").addClass(namespace+"pause").text(vars.pauseText)}},touch:function(){var startX,startY,offset,cwidth,dx,startT,scrolling=false;el.addEventListener("touchstart",onTouchStart,false);function onTouchStart(e){if(slider.animating){e.preventDefault()}else if(e.touches.length===1){slider.pause();cwidth=vertical?slider.h:slider.w;startT=Number(new Date);offset=carousel&&reverse&&slider.animatingTo===slider.last?0:carousel&&reverse?slider.limit-(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo:carousel&&slider.currentSlide===slider.last?slider.limit:carousel?(slider.itemW+vars.itemMargin)*slider.move*slider.currentSlide:reverse?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;startX=vertical?e.touches[0].pageY:e.touches[0].pageX;startY=vertical?e.touches[0].pageX:e.touches[0].pageY;el.addEventListener("touchmove",onTouchMove,false);el.addEventListener("touchend",onTouchEnd,false)}}function onTouchMove(e){dx=vertical?startX-e.touches[0].pageY:startX-e.touches[0].pageX;scrolling=vertical?Math.abs(dx)<Math.abs(e.touches[0].pageX-startY):Math.abs(dx)<Math.abs(e.touches[0].pageY-startY);if(!scrolling||Number(new Date)-startT>500){e.preventDefault();if(!fade&&slider.transitions){if(!vars.animationLoop){dx=dx/(slider.currentSlide===0&&dx<0||slider.currentSlide===slider.last&&dx>0?Math.abs(dx)/cwidth+2:1)}slider.setProps(offset+dx,"setTouch")}}}function onTouchEnd(e){el.removeEventListener("touchmove",onTouchMove,false);if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=reverse?-dx:dx,target=updateDx>0?slider.getTarget("next"):slider.getTarget("prev");if(slider.canAdvance(target)&&(Number(new Date)-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2)){slider.flexAnimate(target,vars.pauseOnAction)}else{if(!fade)slider.flexAnimate(slider.currentSlide,vars.pauseOnAction,true)}}el.removeEventListener("touchend",onTouchEnd,false);startX=null;startY=null;dx=null;offset=null}},resize:function(){if(!slider.animating&&slider.is(":visible")){if(!carousel)slider.doMath();if(fade){methods.smoothHeight()}else if(carousel){slider.slides.width(slider.computedW);slider.update(slider.pagingCount);slider.setProps()}else if(vertical){slider.viewport.height(slider.h);slider.setProps(slider.h,"setTotal")}else{if(vars.smoothHeight)methods.smoothHeight();slider.newSlides.width(slider.computedW);slider.setProps(slider.computedW,"setTotal")}}},smoothHeight:function(dur){if(!vertical||fade){var $obj=fade?slider:slider.viewport;dur?$obj.animate({height:slider.slides.eq(slider.animatingTo).height()},dur):$obj.height(slider.slides.eq(slider.animatingTo).height())}},sync:function(action){var $obj=$(vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case"animate":$obj.flexAnimate(target,vars.pauseOnAction,false,true);break;case"play":if(!$obj.playing&&!$obj.asNav){$obj.play()}break;case"pause":$obj.pause();break}}};slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(asNav&&slider.pagingCount===1)slider.direction=slider.currentItem<target?"next":"prev";if(!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&slider.is(":visible")){if(asNav&&withSync){var master=$(vars.asNavFor).data("flexslider");slider.atEnd=target===0||target===slider.count-1;master.flexAnimate(target,true,false,true,fromNav);slider.direction=slider.currentItem<target?"next":"prev";master.direction=slider.direction;if(Math.ceil((target+1)/slider.visible)-1!==slider.currentSlide&&target!==0){slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");target=Math.floor(target/slider.visible)}else{slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");return false}}slider.animating=true;slider.animatingTo=target;vars.before(slider);
if(pause)slider.pause();if(slider.syncExists&&!fromNav)methods.sync("animate");if(vars.controlNav)methods.controlNav.active();if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");slider.atEnd=target===0||target===slider.last;if(vars.directionNav)methods.directionNav.update();if(target===slider.last){vars.end(slider);if(!vars.animationLoop)slider.pause()}if(!fade){var dimension=vertical?slider.slides.filter(":first").height():slider.computedW,margin,slideString,calcNext;if(carousel){margin=vars.itemWidth>slider.w?vars.itemMargin*2:vars.itemMargin;calcNext=(slider.itemW+margin)*slider.move*slider.animatingTo;slideString=calcNext>slider.limit&&slider.visible!==1?slider.limit:calcNext}else if(slider.currentSlide===0&&target===slider.count-1&&vars.animationLoop&&slider.direction!=="next"){slideString=reverse?(slider.count+slider.cloneOffset)*dimension:0}else if(slider.currentSlide===slider.last&&target===0&&vars.animationLoop&&slider.direction!=="prev"){slideString=reverse?0:(slider.count+1)*dimension}else{slideString=reverse?(slider.count-1-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension}slider.setProps(slideString,"",vars.animationSpeed);if(slider.transitions){if(!vars.animationLoop||!slider.atEnd){slider.animating=false;slider.currentSlide=slider.animatingTo}slider.container.unbind("webkitTransitionEnd transitionend");slider.container.bind("webkitTransitionEnd transitionend",function(){slider.wrapup(dimension)})}else{slider.container.animate(slider.args,vars.animationSpeed,vars.easing,function(){slider.wrapup(dimension)})}}else{if(!touch){slider.slides.eq(slider.currentSlide).fadeOut(vars.animationSpeed,vars.easing);slider.slides.eq(target).fadeIn(vars.animationSpeed,vars.easing,slider.wrapup)}else{slider.slides.eq(slider.currentSlide).css({opacity:0,zIndex:1});slider.slides.eq(target).css({opacity:1,zIndex:2});slider.slides.unbind("webkitTransitionEnd transitionend");slider.slides.eq(slider.currentSlide).bind("webkitTransitionEnd transitionend",function(){vars.after(slider)});slider.animating=false;slider.currentSlide=slider.animatingTo}}if(vars.smoothHeight)methods.smoothHeight(vars.animationSpeed)}};slider.wrapup=function(dimension){if(!fade&&!carousel){if(slider.currentSlide===0&&slider.animatingTo===slider.last&&vars.animationLoop){slider.setProps(dimension,"jumpEnd")}else if(slider.currentSlide===slider.last&&slider.animatingTo===0&&vars.animationLoop){slider.setProps(dimension,"jumpStart")}}slider.animating=false;slider.currentSlide=slider.animatingTo;vars.after(slider)};slider.animateSlides=function(){if(!slider.animating)slider.flexAnimate(slider.getTarget("next"))};slider.pause=function(){clearInterval(slider.animatedSlides);slider.playing=false;if(vars.pausePlay)methods.pausePlay.update("play");if(slider.syncExists)methods.sync("pause")};slider.play=function(){slider.animatedSlides=setInterval(slider.animateSlides,vars.slideshowSpeed);slider.playing=true;if(vars.pausePlay)methods.pausePlay.update("pause");if(slider.syncExists)methods.sync("play")};slider.canAdvance=function(target,fromNav){var last=asNav?slider.pagingCount-1:slider.last;return fromNav?true:asNav&&slider.currentItem===slider.count-1&&target===0&&slider.direction==="prev"?true:asNav&&slider.currentItem===0&&target===slider.pagingCount-1&&slider.direction!=="next"?false:target===slider.currentSlide&&!asNav?false:vars.animationLoop?true:slider.atEnd&&slider.currentSlide===0&&target===last&&slider.direction!=="next"?false:slider.atEnd&&slider.currentSlide===last&&target===0&&slider.direction==="next"?false:true};slider.getTarget=function(dir){slider.direction=dir;if(dir==="next"){return slider.currentSlide===slider.last?0:slider.currentSlide+1}else{return slider.currentSlide===0?slider.last:slider.currentSlide-1}};slider.setProps=function(pos,special,dur){var target=function(){var posCheck=pos?pos:(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo,posCalc=function(){if(carousel){return special==="setTouch"?pos:reverse&&slider.animatingTo===slider.last?0:reverse?slider.limit-(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo:slider.animatingTo===slider.last?slider.limit:posCheck}else{switch(special){case"setTotal":return reverse?(slider.count-1-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case"setTouch":return reverse?pos:pos;case"jumpEnd":return reverse?pos:slider.count*pos;case"jumpStart":return reverse?slider.count*pos:pos;default:return pos}}}();return posCalc*-1+"px"}();if(slider.transitions){target=vertical?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)";dur=dur!==undefined?dur/1e3+"s":"0s";slider.container.css("-"+slider.pfx+"-transition-duration",dur)}slider.args[slider.prop]=target;if(slider.transitions||dur===undefined)slider.container.css(slider.args)};slider.setup=function(type){if(!fade){var sliderOffset,arr;if(type==="init"){slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(slider).append(slider.container);slider.cloneCount=0;slider.cloneOffset=0;if(reverse){arr=$.makeArray(slider.slides).reverse();slider.slides=$(arr);slider.container.empty().append(slider.slides)}}if(vars.animationLoop&&!carousel){slider.cloneCount=2;slider.cloneOffset=1;if(type!=="init")slider.container.find(".clone").remove();slider.container.append(slider.slides.first().clone().addClass("clone")).prepend(slider.slides.last().clone().addClass("clone"))}slider.newSlides=$(vars.selector,slider);sliderOffset=reverse?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset;if(vertical&&!carousel){slider.container.height((slider.count+slider.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){slider.newSlides.css({display:"block"});slider.doMath();slider.viewport.height(slider.h);slider.setProps(sliderOffset*slider.h,"init")},type==="init"?100:0)}else{slider.container.width((slider.count+slider.cloneCount)*200+"%");slider.setProps(sliderOffset*slider.computedW,"init");setTimeout(function(){slider.doMath();slider.newSlides.css({width:slider.computedW,"float":"left",display:"block"});if(vars.smoothHeight)methods.smoothHeight()},type==="init"?100:0)}}else{slider.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(type==="init"){if(!touch){slider.slides.eq(slider.currentSlide).fadeIn(vars.animationSpeed,vars.easing)}else{slider.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(slider.currentSlide).css({opacity:1,zIndex:2})}}if(vars.smoothHeight)methods.smoothHeight()}if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide")};slider.doMath=function(){var slide=slider.slides.first(),slideMargin=vars.itemMargin,minItems=vars.minItems,maxItems=vars.maxItems;slider.w=slider.width();slider.h=slide.height();slider.boxPadding=slide.outerWidth()-slide.width();if(carousel){slider.itemT=vars.itemWidth+slideMargin;slider.minW=minItems?minItems*slider.itemT:slider.w;slider.maxW=maxItems?maxItems*slider.itemT:slider.w;slider.itemW=slider.minW>slider.w?(slider.w-slideMargin*minItems)/minItems:slider.maxW<slider.w?(slider.w-slideMargin*maxItems)/maxItems:vars.itemWidth>slider.w?slider.w:vars.itemWidth;slider.visible=Math.floor(slider.w/(slider.itemW+slideMargin));slider.move=vars.move>0&&vars.move<slider.visible?vars.move:slider.visible;slider.pagingCount=Math.ceil((slider.count-slider.visible)/slider.move+1);slider.last=slider.pagingCount-1;slider.limit=slider.pagingCount===1?0:vars.itemWidth>slider.w?(slider.itemW+slideMargin*2)*slider.count-slider.w-slideMargin:(slider.itemW+slideMargin)*slider.count-slider.w-slideMargin}else{slider.itemW=slider.w;slider.pagingCount=slider.count;slider.last=slider.count-1}slider.computedW=slider.itemW-slider.boxPadding};slider.update=function(pos,action){slider.doMath();if(!carousel){if(pos<slider.currentSlide){slider.currentSlide+=1}else if(pos<=slider.currentSlide&&pos!==0){slider.currentSlide-=1}slider.animatingTo=slider.currentSlide}if(vars.controlNav&&!slider.manualControls){if(action==="add"&&!carousel||slider.pagingCount>slider.controlNav.length){methods.controlNav.update("add")}else if(action==="remove"&&!carousel||slider.pagingCount<slider.controlNav.length){if(carousel&&slider.currentSlide>slider.last){slider.currentSlide-=1;slider.animatingTo-=1}methods.controlNav.update("remove",slider.last)}}if(vars.directionNav)methods.directionNav.update()};slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1;slider.last=slider.count-1;if(vertical&&reverse){pos!==undefined?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj)}else{pos!==undefined?slider.slides.eq(pos).before($obj):slider.container.append($obj)}slider.update(pos,"add");slider.slides=$(vars.selector+":not(.clone)",slider);slider.setup();vars.added(slider)};slider.removeSlide=function(obj){var pos=isNaN(obj)?slider.slides.index($(obj)):obj;slider.count-=1;slider.last=slider.count-1;if(isNaN(obj)){$(obj,slider.slides).remove()}else{vertical&&reverse?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove()}slider.doMath();slider.update(pos,"remove");slider.slides=$(vars.selector+":not(.clone)",slider);slider.setup();vars.removed(slider)};methods.init()};$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};$.fn.flexslider=function(options){if(options===undefined)options={};if(typeof options==="object"){return this.each(function(){var $this=$(this),selector=options.selector?options.selector:".slides > li",$slides=$this.find(selector);if($slides.length===1){$slides.fadeIn(400);if(options.start)options.start($this)}else if($this.data("flexslider")==undefined){new $.flexslider(this,options)}})}else{var $slider=$(this).data("flexslider");switch(options){case"play":$slider.play();break;case"pause":$slider.pause();break;case"next":$slider.flexAnimate($slider.getTarget("next"),true);break;case"prev":case"previous":$slider.flexAnimate($slider.getTarget("prev"),true);break;default:if(typeof options==="number")$slider.flexAnimate(options,true)}}}})(jQuery);(function(){var Accordian,FestivalInfo,Flipper,Footer,Gallery,Global,Home,Lineup,Map,MobileNav,MotionSickness,Page,Share;$(function(){Global.init();return Page.init()});Global={playlist:null,schedulemay:null,schedulejuly:null,scrollTarget:0,phrases:["Test Phrase Here"],breakpoints:{tablet:"768px",desktop:"1024px"},init:function(){this.initDjax();this.initJumpLinks();this.initSetAspect();enquire.listen();Footer.init();Map.init();$("body,html").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(e){if(e.which>0||e.type==="mousedown"||e.type==="mousewheel"){return $("html,body").stop()}});$("body").addClass("transition");$(".print").click(function(e){e.preventDefault();return window.print()});this.initPlaylist();this.initScheduleMay();this.initScheduleJuly();return this.initImageGroupHover()},initImageGroupHover:function(){var _this=this;$(document).on("mouseenter",".image-group a",function(e){var $icon;$icon=$(".image-overlay .icon",e.currentTarget);$icon.css({marginLeft:"-100%"});return $icon.transition({marginLeft:0},250,"cubic-bezier(0.860, 0.000, 0.070, 1.000)")});return $(document).on("mouseleave",".image-group a",function(e){var $icon;$icon=$(".image-overlay .icon",e.currentTarget);return $icon.transition({marginLeft:"100%"},300,"cubic-bezier(0.860, 0.000, 0.070, 1.000)")})},initDjax:function(){var _this=this;$("body").djax(".djax",["#",".jpg",".jpeg",".gif",".png",".pdf",".svg",".mp3",".JPG",".JPEG",".PDF",".GIF",".PDF",".MP3",".PNG"]);$(".no-djax").removeClass("dJAX_internal");$(window).bind("djaxLoad",function(e,data){var bodyClass;_this.hideSpinner();bodyClass=data.response.match(/<body\sclass=\"(.*)">/)[1];$("body").attr("class",bodyClass);$("body").addClass("transition");Page.init();if(!(Global.getParameterByName("s").length>0)){$(window).scrollTo(_this.scrollTarget,500,{easing:"easeInOutQuint"})}return _gaq.push(["_trackPageview"])});return $(window).bind("djaxClick",function(e,element){var scrollTarget;Page.kill();_this.showSpinner();scrollTarget=$(element).data("scroll-target");if(scrollTarget){return _this.scrollTarget=$(scrollTarget).offset().top}else{if($(window).width()<768){return _this.scrollTarget=$("#main-content").offset().top+20}else{return _this.scrollTarget=$("#main-content").offset().top+50}}})},killDjax:function(){$(window).unbind("djaxClick");$(window).unbind("djaxLoad");$(window).unbind("popstate");return $(".dJAX_internal").removeClass("dJAX_internal").unbind()},showSpinner:function(){$(".loading-indicator").addClass("show");return $(".loading-indicator .spinner-bg").addClass("spin")},hideSpinner:function(){$(".loading-indicator").removeClass("show");return $(".loading-indicator .spinner-bg").removeClass("spin")},initPlaylist:function(){var _this=this;return LazyLoad.js(["/static/js/libs/jquery.shuffle.js","/static/js/libs/soundmanager/soundmanager2-nodebug-jsmin.js","/static/js/playlist.js"],function(){return _this.playlist=new Playlist})},initScheduleMay:function(){var _this=this;return LazyLoad.js(["/static/js/libs/jquery.cookie.js","/static/js/schedule-may.js"],function(){return _this.schedulemay=new ScheduleMay})},initScheduleJuly:function(){var _this=this;return LazyLoad.js(["/static/js/libs/jquery.cookie.js","/static/js/schedule-july.js"],function(){return _this.schedulejuly=new ScheduleJuly})},initJumpLinks:function(){return $(document).on("click","a:not(.no-scroll)",function(e){var elem;if(/^#\S+/.test($(this).attr("href"))){elem=$($(this).attr("href"));$(window).scrollTo(elem,500,{easing:"easeInOutQuint"});return e.preventDefault()}})},initExpandables:function(){$(".expandable").each(function(){return $(this).data({originalElem:$(this).clone()})});Global.setupExpandables();return $(window).bind("resize",this.updateExpandables)},updateExpandables:function(){$(".expandable").each(function(){var newElem;newElem=$(this).data("originalElem");$(this).replaceWith(newElem);return newElem.data({originalElem:newElem.clone()})});return Global.setupExpandables()},setupExpandables:function(){return $(".expandable").expander({slicePoint:80,expandText:'<span class="read-more">Read More <i class="icon icon-arrow-down"></i></span>',userCollapse:false,moreClass:"expander-more",lessClass:"expander-less",collapseEffect:"hide",expandEffect:"show"})},initSetAspect:function(){return $(window).bind("resize orientationchange",Global.setAspect)},setAspect:function(){return $("[data-aspect]").each(function(){var aspect,mHeight,mWidth,maxWidth,newHeight,newWidth,pHeight,pWidth;aspect=eval($(this).attr("data-aspect"));maxWidth=$(this).attr("data-max-width");pWidth=$(this).parent().width();pHeight=$(this).parent().height();if(maxWidth>""){mWidth=parseInt(maxWidth);mHeight=mWidth/aspect;if(mWidth/pWidth>mHeight/pHeight){newWidth=pWidth>mWidth?mWidth:pWidth;newHeight=newWidth/aspect}else{newHeight=pHeight>mHeight?mHeight:pHeight;newWidth=newHeight*aspect}}else{newHeight=pWidth/aspect;newWidth=pWidth}return $(this).css({height:newHeight,width:newWidth})})},getParameterByName:function(name){var regex,regexS,results;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");regexS="[\\?&]"+name+"=([^&#]*)";regex=new RegExp(regexS);results=regex.exec(window.location.search);if(results===null){return""}else{return decodeURIComponent(results[1].replace(/\+/g," "))}}};Page={init:function(){var section;window.picturefill();Accordian.init();Home.init();Lineup.init();Gallery.init();MobileNav.init();FestivalInfo.init();Share.init();if(Global.schedulemay){Global.schedulemay.buildScheduleFromCookie()}if(Global.schedulejuly){Global.schedulejuly.buildScheduleFromCookie()}Global.setAspect();Flipper.init();MotionSickness.init();Map.init(".zoomer-viewport.map-page");$(".content-primary, .content-brief").fitVids({customSelector:"iframe[src^='http://www.npr.org/templates/event/embeddedVideo.php']"});section=Global.getParameterByName("s");if(section.length>0){$(window).scrollTo($("#"+section),500,{easing:"easeInOutQuint"});if($(window).width()<768&&section==="map"){return $("#map h2").click()}}},kill:function(){Accordian.kill();Home.kill();Lineup.kill();MobileNav.kill();FestivalInfo.kill();Gallery.kill();return MotionSickness.kill()}};Home={ajaxArtistOpen:false,currentIndex:null,init:function(){if($("body.home").length>0){$("#ajax-artist-holder").hide();$(".close-button").removeClass("dJAX_internal");$('a[href="/?s=blog"]').click(function(e){e.preventDefault();return $(window).scrollTo($("#blog"),500,{easing:"easeInOutQuint"})});this.initAjaxArtists();enquire.register("screen and (max-width: 1023px) and (min-width: 768px)",this.onTablet());enquire.register("screen and (min-width: 1024px)",this.onDesktop());enquire.register("screen and (max-width: 767px)",this.onMobile());return enquire.fire()}},kill:function(){if($("body.home").length>0){$(".ajax-artist-link").unbind();$("#ajax-artist-holder .pagination a").unbind();$("#ajax-artist-holder .close-button").unbind();$('a[href="/#blog"]').unbind();this.ajaxArtistOpen=false;enquire.unregister("screen and (max-width: 1023px) and (min-width: 768px)",this.onTablet());enquire.unregister("screen and (min-width: 1024px)",this.onDesktop());return enquire.unregister("screen and (max-width: 767px)",this.onMobile())}},onTablet:function(){var handler;return handler={match:function(){if($("#blog .content-list").data("masonry-init")==="true"){$("#blog .content-list").masonry("destroy")}return $("#blog .content-list").imagesLoaded(function(){$("#blog .content-list").data("masonry-init","true");return $("#blog .content-list").masonry({columnWidth:345,gutterWidth:38})})}}},onDesktop:function(){var handler;return handler={match:function(){if($("#blog .content-list").data("masonry-init")==="true"){$("#blog .content-list").masonry("destroy")}return $("#blog .content-list").imagesLoaded(function(){$("#blog .content-list").data("masonry-init","true");return $("#blog .content-list").masonry({columnWidth:470,gutterWidth:40})})}}},onMobile:function(){var handler;return handler={match:function(){if($("#blog .content-list").data("masonry-init")==="true"){$("#blog .content-list").masonry("destroy")}return $("#blog .content-list .home-blog-post").css("style","")}}},initAjaxArtists:function(){var _this=this;$(".ajax-artist-link").removeClass("dJAX_internal");return $(".ajax-artist-link").fastClick(function(e){var $icon,$this,link;e.preventDefault();$icon=$(".image-overlay .icon",e.currentTarget);$icon.attr("style","");$this=$(e.currentTarget);_this.currentIndex=$this.parents("li:first").index();link=$this.attr("href");$this.addClass("loading");$(".spinner-bg",$this).addClass("spin");return _this.loadArtistPage(link)})},loadArtistPage:function(link){var _this=this;return $.get(link,function(data){var page;page=$(data).find(".content-page").first();return _this.updateContent(page)})},updateContent:function(page){var top,_this=this;top=$("#ajax-artist-anchor").offset().top;return $(window).scrollTo(top,600,{easing:"easeInOutQuint",onAfter:function(){var $nextContainer;$("#ajax-artist-holder").append("<div class='inner-artist-holder'></div>");$nextContainer=$("#ajax-artist-holder .inner-artist-holder:last");if(_this.ajaxArtistOpen){$nextContainer.css({position:"absolute",top:0,left:"100%"})}$nextContainer.append(page);return _this.initLoadedArtist()}})},initLoadedArtist:function(){var $nextContainer,$previousContainer,next,nextArtist,_this=this;Global.killDjax();Global.initDjax();$nextContainer=$("#ajax-artist-holder .inner-artist-holder:last");$previousContainer=$("#ajax-artist-holder .inner-artist-holder:first");$(".ajax-artist-link.loading").removeClass("loading");$(".spinner-bg",".ajax-artist-link.loading").removeClass("spin");$(".ajax-artist-link").removeClass("dJAX_internal");next=this.currentIndex+1;if(next>=$("#featured-artists > .images li").length){next=0}nextArtist=$("#featured-artists > .images li:eq("+next+") .image-caption").html();$(".next-description").html(nextArtist);$("#ajax-artist-holder .pagination a").removeClass("dJAX_internal").addClass("no-djax");$("#ajax-artist-holder .pagination a").attr("href","#");$("#ajax-artist-holder .pagination a").click(function(e){var previous;if($(e.currentTarget).parent().hasClass("next")){next=_this.currentIndex+1;if(next>=$("#featured-artists > .images li").length){next=0}$("#featured-artists > .images li:eq("+next+") > a").click()}else{previous=_this.currentIndex-1;if(previous<0){previous=$("#featured-artists > .images li").length-1}$("#featured-artists > .images li:eq("+previous+") > a").click()}Global.showSpinner();e.preventDefault();return e.stopPropagation()});$("#ajax-artist-holder .close-button").fastClick(function(){_this.ajaxArtistOpen=false;return $("#ajax-artist-holder").slideUp(500,"easeOutQuint",function(){$("#ajax-artist-holder").empty();return $(window).scrollTo($("#main-content"),500,{easing:"easeOutQuint"})})});window.picturefill();Global.hideSpinner();if(this.ajaxArtistOpen){$previousContainer.animate({left:"-100%"},500,"easeInOutQuint");return $nextContainer.delay(200).animate({left:0},500,"easeInOutQuint",function(){$nextContainer.css({position:"relative"});return $previousContainer.remove()})}else{this.ajaxArtistOpen=true;return $("#ajax-artist-holder").slideDown(700,"easeInOutQuint")}}};Lineup={isotopeInitialized:false,init:function(){if($("body.lineup").length>0){return this.initIsotope()}},kill:function(){if($("body.lineup").length>0){if(this.isotopeInitialized){$(".sortable").isotope("destroy")}return $("a[data-isotope-filter]").unbind()}},initIsotope:function(){var iso,linkSelect;iso=$(".sortable").isotope({itemSelector:"li",layoutMode:"fitRows"});this.isotopeInitialized=true;$(window).trigger("resize");linkSelect="a[data-isotope-filter]";$(""+linkSelect).parents("ul").find("li:first").addClass("selected");return $(linkSelect).on("click",function(e){var isoQ;$(this).parents("li:first").addClass("selected").siblings().removeClass("selected");isoQ="";$(linkSelect).parents("li.selected").children(linkSelect).each(function(){var isoSplit;isoSplit=$(this).attr("data-isotope-filter").split("|");if(isoSplit[1]!=="*"){return isoQ+="[data-"+isoSplit[0]+"="+isoSplit[1]+"]"}});if(isoQ===""){isoQ="*"}$(".sortable").children(isoQ).each(function(index){var i;i=index+1;$(this).removeClass("third fourth");if(i%3===0){$(this).addClass("third")}if(i%4===0){return $(this).addClass("fourth")}});$(".sortable").isotope({filter:isoQ});e.preventDefault();return e.stopPropagation()})}};FestivalInfo={weatherEndPoint:"http://api.worldweatheronline.com/free/v1/weather.ashx?q=47.10,-119.98&format=json&num_of_days=5&key=6d8r32tx2dhqhu22t5c9k8qs&callback=?",snowyCodes:[368,365,395,392,371,374,350,338,335,332,329,326,323,320,317,314,311,362,284,281,230,227,185,182,179],rainyCodes:[389,386,377,359,356,353,308,305,302,299,296,293,266,263,200,176],sunnyCodes:[113],cloudyCodes:[260,248,143,119,116,122],init:function(){if($("body.festival-info").length>0){this.initWeather();LazyLoad.js(["http://maps.google.com/maps/api/js?sensor=false&callback=initMap"]);enquire.register("screen and (max-width: 1023px) and (min-width: 768px)",this.onTablet());enquire.register("screen and (min-width: 1024px)",this.onDesktop());return enquire.fire()}},kill:function(){if($("body.festival-info").length>0){enquire.unregister("screen and (max-width: 1023px) and (min-width: 768px)",this.onTablet());return enquire.unregister("screen and (min-width: 1024px)",this.onDesktop())}},onTablet:function(){var handler;return handler={match:function(){return FestivalInfo.updateMap()}}},onDesktop:function(){var handler;return handler={match:function(){return FestivalInfo.updateMap()}}},initWeather:function(){var _this=this;return $.getJSON(this.weatherEndPoint,function(response){var weatherCode,weatherDescription,weatherIcon,weatherTemperature,weatherTemperatureString;console.log("in");weatherCode=parseInt(response.data.current_condition[0].weatherCode);weatherDescription=response.data.current_condition[0].weatherDesc[0].value;weatherTemperature=response.data.current_condition[0].temp_F;weatherTemperatureString=weatherTemperature+"<small>&deg; F</small>";weatherIcon=_this.mapWeatherCode(weatherCode);console.log(weatherCode);$(".weather-icon").addClass("icon icon-"+weatherIcon);$(".weather-temperature").html(weatherTemperatureString);return $(".weather-description").html(weatherDescription)})},mapWeatherCode:function(code){var d,hour;d=new Date;hour=d.getHours();if($.inArray(code,this.snowyCodes)!==-1){return"snow"}else if($.inArray(code,this.rainyCodes)!==-1){if(hour<18&&hour>5){return"rain-day"}else{return"rain-night"}}else if($.inArray(code,this.sunnyCodes)!==-1){if(hour<18&&hour>5){return"sun"}else{return"clear-night"}}else if($.inArray(code,this.cloudyCodes)!==-1){if(hour<18&&hour>5){return"cloud-day"}else{return"cloud-night"}}else{return"cloud-day"}},updateMap:function(){if(typeof google!=="undefined"){google.maps.event.trigger(map,"resize");map.setCenter(new google.maps.LatLng(47.09572,-119.882659));return map.setZoom(7)}}};window.initMap=function(){var mapOptions,marker;mapOptions={zoom:7,center:new google.maps.LatLng(47.09572,-119.882659),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:window.mapStyle};window.map=new google.maps.Map(document.getElementById("google-map"),mapOptions);marker=new google.maps.Marker({position:new google.maps.LatLng(47.09572,-119.982664),map:map,icon:"/static/img/common/map-pin.png",animation:google.maps.Animation.DROP,title:"Sasquatch Festival!"});map.setCenter(new google.maps.LatLng(47.09572,-119.882659));return map.setZoom(7)};MobileNav={selector:".mobile-nav-section",content:".mobile-nav-content",closeButtonHtml:'<a href="#" class="icon icon-close mobile-nav-close close-button"></a>',closer:".mobile-nav-close",opener:".mobile-nav-item",mediaQuery:"screen and (max-width:"+(parseInt(Global.breakpoints.tablet)-1)+"px)",_handler:null,handler:function(){var handlerObj,_this=this;FestivalInfo.updateMap();if(!this._handler){handlerObj={match:function(){_this.$sections().find(_this.content).hide();return _this.$sections().on("click ontouchstart",""+_this.opener+", "+_this.closer,_this.handleItemClick)},unmatch:function(){_this.$sections().children(_this.closer).remove();_this.$sections().find(_this.content).show();_this.$sections().find(_this.content).css({overflow:"visible"});return _this.$sections().off("click ontouchstart",""+_this.opener+", "+_this.closer,_this.handleItemClick)}};this._handler=handlerObj}return this._handler},$sections:function(){return $(this.selector)},$openers:function(){return this.$sections().find(this.opener)},init:function(){if(!$("body.festival-info").length>0){return}enquire.register(this.mediaQuery,this.handler());return enquire.fire()},kill:function(){if(!$("body.festival-info").length>0){return}return enquire.unregister(this.mediaQuery,this.handler())},handleItemClick:function(e){var anim,closing,openItemsContent,openItemsParents,toggleElem,toggleParent;toggleParent=$(this).parents(MobileNav.selector).eq(0);toggleElem=toggleParent.find(MobileNav.content);openItemsContent=MobileNav.$sections().find(MobileNav.content).filter(":visible").not(toggleElem);openItemsParents=openItemsContent.parents(MobileNav.selector).not(toggleParent);closing=toggleElem.is(":visible");anim=closing?"slideUp":"slideDown";if(!closing){toggleParent.prepend(MobileNav.closeButtonHtml)}else{toggleParent.find(MobileNav.closer).remove()}toggleElem.dequeue()[anim]({duration:"500",easing:"easeInOutQuint",complete:function(){return FestivalInfo.updateMap()}});openItemsParents.find(MobileNav.closer).remove();openItemsContent.hide();toggleElem.find(MobileNav.closer).show();e.preventDefault();return e.stopPropagation()}};Accordian={selector:".accordian-item",opener:".accordian-target",content:".accordian-expander",$sections:function(){return $(this.selector)},init:function(){this.$sections().find(this.content).hide();return this.bindEvents()},kill:function(){},bindEvents:function(){return this.$sections().on("click",""+this.opener,this.handleItemClick)},handleItemClick:function(){var anim,closing,openItemsContent,openItemsParents,toggleElem,toggleParent;toggleParent=$(this).parents(Accordian.selector).eq(0);toggleElem=toggleParent.find(Accordian.content);openItemsContent=Accordian.$sections().find(Accordian.content).filter(":visible").not(toggleElem);openItemsParents=openItemsContent.parents(Accordian.selector).not(toggleParent);closing=toggleElem.is(":visible");anim=closing?"slideUp":"slideDown";openItemsParents.removeClass("selected");openItemsContent.dequeue().slideUp({duration:500,easing:"easeInOutQuint"});if(closing){toggleParent.removeClass("selected")}else{toggleParent.addClass("selected")}return toggleElem.dequeue()[anim]({duration:"500",easing:"easeInOutQuint"})}};Flipper={elem:".image-group.slideable",flipper:".flipper",list:".images",items:".images > li",previous:".slide-nav > .previous",next:".slide-nav > .next",indicators:".slide-nav > .slide",nav:".slide-nav",card:".card",sides:".card > div",captions:".captions > div",init:function(){var $elem,$flipper,$nav;$elem=$(this.elem);$flipper=$elem.find(this.flipper);$flipper.data({flipperDeg:0,flipperSide:0});$nav=$elem.find(this.nav);$elem.addClass("enabled");if(Modernizr.csstransforms3d&&Modernizr.csstransitions&&!$.browser.msie){$flipper.addClass("three-d")}$elem.find(this.items).each(function(index){return $nav.find(".next").before('<li class="slide"><a href="#"><span>'+(index+1)+"</span></a></li>")});this.bindInteractions();return $(this.indicators).eq(0).click()},goTo:function($elem,index,direction){var $cText,$caption,$captionElem,$clone,$loadElem,$newSideElem,$oldSideElem,$parent,curDeg,lStart,newDeg,newSide,oldSide;if(direction==null){direction=1}oldSide=$elem.data("flipperSide");newSide=oldSide===0?1:0;curDeg=$elem.data("flipperDeg");newDeg=curDeg+-(180*direction);$elem.find(this.indicators).removeClass("selected").eq(index).addClass("selected");$parent=this.getParent($elem);$loadElem=$parent.find(this.items).eq(index);$clone=$loadElem.clone();$newSideElem=$parent.find(this.sides).eq(newSide).show();$oldSideElem=$parent.find(this.sides).eq(oldSide);$captionElem=$parent.find(this.captions).eq(newSide);$caption=$clone.find(".image-caption");$cText=$caption.remove().text();$newSideElem.empty().append($clone.html());$captionElem.text($cText);$captionElem.fadeIn("fast").siblings().fadeOut("fast");$elem.data({flipperSide:newSide,flipperDeg:newDeg});if($elem.hasClass("three-d")){$elem.find(".card").transit({rotateY:""+newDeg+"deg",duration:500,delay:50})}else{lStart=direction===1?226:-226;$newSideElem.css({left:lStart});$oldSideElem.css({left:0});$newSideElem.dequeue().animate({left:0},{duration:300,easing:"easeInOutQuint"});$oldSideElem.dequeue().animate({left:-lStart},{duration:300,easing:"easeInOutQuint"})}return $newSideElem.addClass("selected").siblings().removeClass("selected")},getCurrentIndex:function($elem){var retValue;retValue=0;$elem.find(this.indicators).each(function(i){if($(this).hasClass("selected")){return retValue=i}});return retValue},getFlipper:function($elem){return $elem.parents(this.flipper).eq(0)},getParent:function($elem){return $elem.parents(this.elem).eq(0)
},bindInteractions:function(){$(this.indicators).on("click",function(e){var $parent,curIndex,direction,index;$parent=Flipper.getFlipper($(this));curIndex=Flipper.getCurrentIndex($parent);index=$parent.find(Flipper.indicators).index($(this));direction=index>=curIndex?1:-1;Flipper.goTo($parent,index,direction);return e.preventDefault()});$(""+this.next+", "+this.previous).on("click",function(e){var $indicators,$parent,curIndex,direction,newIndex;$parent=Flipper.getFlipper($(this));curIndex=Flipper.getCurrentIndex($parent);direction=0;$indicators=$parent.find(Flipper.indicators);if($(this).is(Flipper.next)===true){newIndex=curIndex<$indicators.length-1?curIndex+1:0;direction=1}else{newIndex=curIndex===0?$($indicators).length-1:curIndex-1;direction=-1}Flipper.goTo($parent,newIndex,direction);return e.preventDefault()});return $(this.elem).hammer().bind("swipe",function(e){var elemSelect;if(e.direction==="left"){elemSelect=Flipper.next}if(e.direction==="right"){elemSelect=Flipper.previous}if(elemSelect){return $(this).find(elemSelect).trigger("click")}})}};Map={container:".zoomer",viewPort:".zoomer-viewport",zoomIn:".zoomer-controls .zoom-in",zoomOut:".zoomer-controls .zoom-out",iViewerOptions:{ui_disabled:true,mousewheel:false,zoom:"fit",src:""},init:function(element){var $el,imgSrc,options;if(element==null){element=null}if(element){$el=$(element);if($el.length>0&&$el.data("map-init")===!"true"){$el.data("map-init","true");options=this.iViewerOptions;imgSrc=$el.attr("data-src");if(imgSrc>""){options.src=imgSrc}$el.iviewer(options);return this.bindEvents($el)}}else{return $(this.viewPort).each(function(){if($(this).data("map-init")!=="true"){$(this).data("map-init","true");options=Map.iViewerOptions;imgSrc=$(this).attr("data-src");if(imgSrc>""){options.src=imgSrc}$(this).iviewer(options);return Map.bindEvents($(this))}})}},resizeCb:function(){return $(Map.viewPort).each(function(){return Map.updateOptions($(this),"resizeCB")})},handleZoom:function(e){var $pViewPort,mult;mult=$(this).is(Map.zoomIn)?1:-1;$pViewPort=$(this).parents(Map.container).find(Map.viewPort);$pViewPort.iviewer("zoom_by",mult);return e.preventDefault()},handleClick:function(e){var $vP,src,t;t=$(this).attr("data-zoomer-target");src=$(this).attr("data-zoomer-src");$vP=$("#"+t).find(Map.viewPort);$vP.iviewer("loadImage",src);$(this).parents("li:first").addClass("selected").siblings().removeClass("selected");if($(this).data("pdf")){$(".pdf-download a").attr("href",$(this).data("pdf"))}return e.preventDefault()},bindEvents:function($elem){var $container,containerId;$container=$elem.parents(this.container).eq(0);containerId=$container.attr("id");$elem.bind("ivieweronfinishload",function(ev,src){return Map.updateOptions($(this),"finish")});$(window).unbind("resize",this.resizeCb).bind("resize",this.resizeCb);$container.find(""+this.zoomIn+", "+this.zoomOut).unbind("click",this.handleZoom).fastClick(this.handleZoom);if(containerId){return $("[data-zoomer-target="+containerId+"][data-zoomer-src]").off("click",this.handleClick).on("click",this.handleClick).eq(0).click()}},updateOptions:function($elem){var displayX,displayY,divisor,origX;if($elem.data("map-init")==="true"){displayX=$elem.width();displayY=$elem.height();if(displayX!==$elem.data("lastDisplayX")){origX=$elem.iviewer("info","orig_width");divisor=101;$elem.iviewer("option","zoom_min",displayX/origX*divisor);$elem.iviewer("option","zoom_base",displayX/divisor);$elem.iviewer("set_zoom",displayX/origX*divisor)}return $elem.data({lastDisplayX:displayX})}}};Share={init:function(){return $(".share-links ul").each(function(){var $this,media,text,title,url;$this=$(this);media=$this.attr("data-media");url=$this.attr("data-url");text=$this.attr("data-text");title=$this.attr("data-title");return $("li",$this).each(function(){$this=$(this);$this.addClass("js-share-link");$this.data("media",media);$this.data("url",url);$this.data("text",text);$this.data("title",title);return $this.fastClick(function(e){var left,shareUrl,top;e.preventDefault();$this=$(this);if($this.hasClass("facebook")){_gaq.push(["_trackEvent","Share","Facebook",""]);shareUrl="http://www.facebook.com/sharer.php?s=100&p[title]="+$this.data("title")+"&p[summary]="+$this.data("text")+"&p[url]="+$this.data("url")+"&p[images][0]="+$this.data("media")}else if($this.hasClass("twitter")){_gaq.push(["_trackEvent","Share","Twitter",""]);shareUrl="https://twitter.com/intent/tweet?text="+$this.data("title")+" "+$this.data("url")}else if($this.hasClass("email")){_gaq.push(["_trackEvent","Share","Email",""]);window.location.href="mailto:?&body="+$this.data("title")+" "+$this.data("url")+"&subject="+$this.data("title")}if(!$this.hasClass("email")){left=screen.width/2-400;top=screen.height/2-200;return window.open(shareUrl,"sharer","width=800,height=400,top="+top+",left="+left)}})})})},kill:function(){return $("js-share-link").unbind()}};Footer={footerPanel:".utility-playlist",footerNav:".nav-utility",closeButton:".close-button",targetsContainer:"tab-content",init:function(){return this.bindEvents()},bindEvents:function(){var _this=this;$(document).on("click",".poster-cta",function(e){_this.openFooter($("#poster",_this.footerPanel));e.preventDefault();return e.stopPropagation()});$(this.footerPanel).find(this.footerNav).on("click","a",function(e){var targetElem;$(e.currentTarget).parents("li:first").addClass("selected").siblings().removeClass("selected");targetElem=$($(e.currentTarget).attr("href"),_this.footerPanel);_this.openFooter(targetElem);e.preventDefault();return e.stopPropagation()});$(this.footerPanel).find(this.closeButton).on("click",function(e){_this.closeFooter();return e.preventDefault()});return $("body").on("keydown",function(e){if(e.keyCode===27){return _this.closeFooter()}})},openFooter:function(elem){$(this.footerPanel).addClass("open");$(".tab-content .section-outer",this.footerPanel).removeClass("open");$(elem).addClass("open");if(elem.is(".open")){elem.scrollTo(0,500,{easing:"easeInOutQuint"})}else{elem.scrollTo(0)}elem.addClass("open").siblings().removeClass("open");$(this.footerPanel).addClass("open");return $("html").css({overflow:"hidden"})},closeFooter:function(){$(this.footerPanel).removeClass("open");return $("html").css({overflow:"auto"})}};Gallery={list:".image-gallery-list li",overlay:".main-overlay",slideContainer:".main-overlay .gallery-images .slides",flexSlider:".main-overlay .gallery-images",flexObj:null,clickEvent:Modernizr.touch?"touchstart":"click",captionHeight:function(){var returnVal,tBreak;tBreak=parseInt(Global.breakpoints.tablet);returnVal=$(window).width()<tBreak?42:77;return returnVal},init:function(){if($(".image-gallery-list").length>0){$(this.slideContainer).append($("<li></li><li></li>"));this.resizeElems();this.bindEvents();$(this.flexSlider).flexslider({animation:"slide",controlNav:false,directionNav:false,slideshow:false,before:Gallery.before,start:Gallery.before});this.flexObj=$(this.flexSlider).data("flexslider");return this.updateSlides()}},kill:function(){$(window).unbind("resize",this.resizeElems);$(this.overlay).unbind();return $(".gallery .prev-button, .gallery .next-button").unbind()},bindEvents:function(){$(window).bind("resize orientationchange",Gallery.resizeElems);$(this.overlay).on(this.clickEvent,".close-button",this.hideOverlay);$("body").on("keydown",function(e){if(e.keyCode===27){return Gallery.hideOverlay()}});return $(".gallery .prev-button, .gallery .next-button").bind(this.clickEvent,this.handleDirClick)},handleDirClick:function(e){var evt;evt=$(this).is(".prev-button")?"prev":"next";return $(Gallery.flexSlider).flexslider(evt)},handleItemClick:function(e){var index;index=$(this).parent("li:first").index();$(Gallery.flexSlider).flexslider(index);Gallery.showOverlay();return e.preventDefault()},resizeElems:function(){var height;height=window.innerHeight?window.innerHeight:$(window).height();$(Gallery.flexSlider).find("li, ul").css({height:height-Gallery.captionHeight()+"px"});return setTimeout(function(){return Global.setAspect()},10)},showLoading:function($elem){$(".spinner",this.overlay).addClass("show");return $(".spinner-bg",this.overlay).addClass("spin")},hideLoading:function($elem){$(".spinner",this.overlay).removeClass("show");return $(".spinner-bg",this.overlay).removeClass("spin")},showOverlay:function(){$(window).scrollTo({top:$(window).scrollTop(),left:$(window).scrollLeft()});setTimeout(function(){return Gallery.resizeElems()},500);$(document).on("touchmove",function(e){return e.preventDefault()});$(Gallery.overlay).addClass("show");return $("html").css({overflow:"hidden"})},hideOverlay:function(){$(Gallery.overlay).removeClass("show");$("html").css({overflow:"auto"});return $(document).off("touchmove")},updateSlides:function(){var $slideContainer,flexObj;flexObj=this.flexObj;$slideContainer=$(this.slideContainer);$slideContainer.find("li:not(.clone)").each(function(){flexObj.removeSlide($(this));return $(this).remove()});$(this.list).on("click","a",this.handleItemClick);$(this.list).each(function(i){var $li;$li=$("<li data-added'></li>");$li.appendTo($slideContainer);return flexObj.addSlide($li,i)});return this.resizeElems()},before:function(obj){var $slide,caption,imagePath,index,l;index=obj.animatingTo;$slide=obj.slides.eq(index);caption=$(Gallery.list).eq(index).find("a").data("caption");$(".caption",this.overlay).html(caption);if($slide.find("img").length===0){imagePath=$(Gallery.list).eq(index).find("a").attr("href");Gallery.showLoading($slide);l=new PxLoader;l.addImage(imagePath);l.addCompletionListener(function(){var $img;Gallery.hideLoading($slide);$img=$("<img />").attr("src",imagePath);$img.attr({"data-aspect":$img.get(0).width/$img.get(0).height,"data-max-width":$img.get(0).width});$img.appendTo($slide);Global.setAspect();return $img.hide().fadeIn("fast")});return l.start()}}};MotionSickness={currentIndex:null,init:function(){var $selectedGif,urlGif,_this=this;if($("body.motion-sickness").length>0){$(".image-group .images > li").each(function(index,el){var $el,d,src;d=new Date;$el=$(el);src=$("img",$el).attr("src")+("?"+d.getTime());$("img",$el).attr("src",src);return $("> a",$el).attr("href",src)});$(".gif-link").fastClick(function(e){var $this,caption,image;e.preventDefault();$this=$(e.currentTarget);image=$("img",$this).attr("src");caption=$this.data("submitted-by");_this.currentIndex=$this.parents("li:first").index();$(".gif-image").attr("src",image);$(".gif-pop").addClass("open");if(caption.length>0){$(".gif-pop .caption").html("Submitted by "+caption)}return $("html").css("overflow","hidden")});$(".gif-pop .close-button").fastClick(function(e){e.preventDefault();$("html").css("overflow","auto");$(".gif-pop").removeClass("open");$(".gif-image").attr("src","/static/img/common/placeholder.png");return $(".gif-pop .caption").html("")});$(".gif-pop .next-button, .gif-pop .prev-button").fastClick(function(e){var next,previous;e.preventDefault();$(".gif-pop .caption").html("");if($(e.currentTarget).hasClass("next-button")){next=_this.currentIndex+1;if(next>=$(".images > li").length){next=0}return $(".images > li:eq("+next+") .gif-link").click()}else{previous=_this.currentIndex-1;if(previous<0){previous=$(".images > li").length-1}return $(".images > li:eq("+previous+") .gif-link").click()}});urlGif=Global.getParameterByName("gif");$selectedGif=$("a[data-url-title="+urlGif+"]");if(urlGif.length>0&&$selectedGif.length>0){return $selectedGif.click()}}},kill:function(){if($("body.motion-sickness").length>0){$(".gif-link").unbind();$(".gif-pop").unbind();return $(".gif-pop .icon").unbind()}}}}).call(this);